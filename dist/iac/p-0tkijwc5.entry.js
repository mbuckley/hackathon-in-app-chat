import{r as e,c as t,h as n,g as r}from"./p-7887db16.js";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e,t){return e(t={exports:{}},t.exports),t.exports}const o=(a=s(function(e){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(!navigator||!navigator.sendBeacon)return!1;navigator.sendBeacon(e)}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n(1)),o=r(n(40)),a=r(n(41)),u=n(42),c=(n(5),function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.listenToBrowserNetworkEvents,r=void 0===n||n;t.db=a.default,t.sdkFamily="Web",t.networking=new o.default({del:u.del,get:u.get,post:u.post,sendBeacon:i});var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r&&(window.addEventListener("offline",function(){s.networkDownDetected()}),window.addEventListener("online",function(){s.networkUpDetected()})),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,s.default),e}());t.default=c,e.exports=t.default},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(2)),a=i(n(6)),u=i(n(8)),c=i(n(9)),l=i(n(16)),h=r(n(17)),f=r(n(18)),d=r(n(19)),p=r(n(20)),g=r(n(21)),y=r(n(22)),b=r(n(23)),v=r(n(24)),_=r(n(25)),m=r(n(26)),k=r(n(27)),w=r(n(28)),O=r(n(29)),T=r(n(30)),P=r(n(31)),S=r(n(32)),C=r(n(33)),E=r(n(34)),M=r(n(35)),N=r(n(36)),x=r(n(37)),j=r(n(38)),A=r(n(12)),U=r(n(39)),R=i(n(13)),D=i(n(10)),I=i((n(5),n(3))),K=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=t.networking,i=this._config=new o.default({setup:t,db:t.db}),s=new a.default({config:i});r.init(i);var R={config:i,networking:r,crypto:s},D=l.default.bind(this,R,A),I=l.default.bind(this,R,m),K=l.default.bind(this,R,w),L=l.default.bind(this,R,T),G=l.default.bind(this,R,U),H=this._listenerManager=new c.default,B=new u.default({timeEndpoint:D,leaveEndpoint:I,heartbeatEndpoint:K,setStateEndpoint:L,subscribeEndpoint:G,crypto:R.crypto,config:R.config,listenerManager:H});this.addListener=H.addListener.bind(H),this.removeListener=H.removeListener.bind(H),this.removeAllListeners=H.removeAllListeners.bind(H),this.channelGroups={listGroups:l.default.bind(this,R,p),listChannels:l.default.bind(this,R,g),addChannels:l.default.bind(this,R,h),removeChannels:l.default.bind(this,R,f),deleteGroup:l.default.bind(this,R,d)},this.push={addChannels:l.default.bind(this,R,y),removeChannels:l.default.bind(this,R,b),deleteDevice:l.default.bind(this,R,_),listChannels:l.default.bind(this,R,v)},this.hereNow=l.default.bind(this,R,P),this.whereNow=l.default.bind(this,R,k),this.getState=l.default.bind(this,R,O),this.setState=B.adaptStateChange.bind(B),this.grant=l.default.bind(this,R,C),this.audit=l.default.bind(this,R,S),this.publish=l.default.bind(this,R,E),this.fire=function(e,t){return e.replicate=!1,e.storeInHistory=!1,n.publish(e,t)},this.history=l.default.bind(this,R,M),this.deleteMessages=l.default.bind(this,R,N),this.messageCounts=l.default.bind(this,R,x),this.fetchMessages=l.default.bind(this,R,j),this.time=D,this.subscribe=B.adaptSubscribeChange.bind(B),this.presence=B.adaptPresenceChange.bind(B),this.unsubscribe=B.adaptUnsubscribeChange.bind(B),this.disconnect=B.disconnect.bind(B),this.reconnect=B.reconnect.bind(B),this.destroy=function(e){B.unsubscribeAll(e),B.disconnect()},this.stop=this.destroy,this.unsubscribeAll=B.unsubscribeAll.bind(B),this.getSubscribedChannels=B.getSubscribedChannels.bind(B),this.getSubscribedChannelGroups=B.getSubscribedChannelGroups.bind(B),this.encrypt=s.encrypt.bind(s),this.decrypt=s.decrypt.bind(s),this.getAuthKey=R.config.getAuthKey.bind(R.config),this.setAuthKey=R.config.setAuthKey.bind(R.config),this.setCipherKey=R.config.setCipherKey.bind(R.config),this.getUUID=R.config.getUUID.bind(R.config),this.setUUID=R.config.setUUID.bind(R.config),this.getFilterExpression=R.config.getFilterExpression.bind(R.config),this.setFilterExpression=R.config.setFilterExpression.bind(R.config),this.setHeartbeatInterval=R.config.setHeartbeatInterval.bind(R.config),r.hasModule("proxy")&&(this.setProxy=function(e){R.config.setProxy(e),n.reconnect()})}return s(e,[{key:"getVersion",value:function(){return this._config.getVersion()}},{key:"networkDownDetected",value:function(){this._listenerManager.announceNetworkDown(),this._config.restore?this.disconnect():this.destroy(!0)}},{key:"networkUpDetected",value:function(){this._listenerManager.announceNetworkUp(),this.reconnect()}}],[{key:"generateUUID",value:function(){return I.default.createUUID()}}]),e}();K.OPERATIONS=R.default,K.CATEGORIES=D.default,t.default=K,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={default:n(3)},s=(n(5),function(){function e(t){var n=t.setup,r=t.db;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._db=r,this.instanceId="pn-"+i.default.createUUID(),this.secretKey=n.secretKey||n.secret_key,this.subscribeKey=n.subscribeKey||n.subscribe_key,this.publishKey=n.publishKey||n.publish_key,this.sdkName=n.sdkName,this.sdkFamily=n.sdkFamily,this.partnerId=n.partnerId,this.setAuthKey(n.authKey),this.setCipherKey(n.cipherKey),this.setFilterExpression(n.filterExpression),this.origin=n.origin||"ps.pndsn.com",this.secure=n.ssl||!1,this.restore=n.restore||!1,this.proxy=n.proxy,this.keepAlive=n.keepAlive,this.keepAliveSettings=n.keepAliveSettings,this.autoNetworkDetection=n.autoNetworkDetection||!1,this.dedupeOnSubscribe=n.dedupeOnSubscribe||!1,this.maximumCacheSize=n.maximumCacheSize||100,this.customEncrypt=n.customEncrypt,this.customDecrypt=n.customDecrypt,"undefined"!=typeof location&&"https:"===location.protocol&&(this.secure=!0),this.logVerbosity=n.logVerbosity||!1,this.suppressLeaveEvents=n.suppressLeaveEvents||!1,this.announceFailedHeartbeats=n.announceFailedHeartbeats||!0,this.announceSuccessfulHeartbeats=n.announceSuccessfulHeartbeats||!1,this.useInstanceId=n.useInstanceId||!1,this.useRequestId=n.useRequestId||!1,this.requestMessageCountThreshold=n.requestMessageCountThreshold,this.setTransactionTimeout(n.transactionalRequestTimeout||15e3),this.setSubscribeTimeout(n.subscribeRequestTimeout||31e4),this.setSendBeaconConfig(n.useSendBeacon||!0),this.setPresenceTimeout(n.presenceTimeout||300),null!=n.heartbeatInterval&&this.setHeartbeatInterval(n.heartbeatInterval),this.setUUID(this._decideUUID(n.uuid))}return r(e,[{key:"getAuthKey",value:function(){return this.authKey}},{key:"setAuthKey",value:function(e){return this.authKey=e,this}},{key:"setCipherKey",value:function(e){return this.cipherKey=e,this}},{key:"getUUID",value:function(){return this.UUID}},{key:"setUUID",value:function(e){return this._db&&this._db.set&&this._db.set(this.subscribeKey+"uuid",e),this.UUID=e,this}},{key:"getFilterExpression",value:function(){return this.filterExpression}},{key:"setFilterExpression",value:function(e){return this.filterExpression=e,this}},{key:"getPresenceTimeout",value:function(){return this._presenceTimeout}},{key:"setPresenceTimeout",value:function(e){return this._presenceTimeout=e,this.setHeartbeatInterval(this._presenceTimeout/2-1),this}},{key:"setProxy",value:function(e){this.proxy=e}},{key:"getHeartbeatInterval",value:function(){return this._heartbeatInterval}},{key:"setHeartbeatInterval",value:function(e){return this._heartbeatInterval=e,this}},{key:"getSubscribeTimeout",value:function(){return this._subscribeRequestTimeout}},{key:"setSubscribeTimeout",value:function(e){return this._subscribeRequestTimeout=e,this}},{key:"getTransactionTimeout",value:function(){return this._transactionalRequestTimeout}},{key:"setTransactionTimeout",value:function(e){return this._transactionalRequestTimeout=e,this}},{key:"isSendBeaconEnabled",value:function(){return this._useSendBeacon}},{key:"setSendBeaconConfig",value:function(e){return this._useSendBeacon=e,this}},{key:"getVersion",value:function(){return"4.24.3"}},{key:"_decideUUID",value:function(e){return e||(this._db&&this._db.get&&this._db.get(this.subscribeKey+"uuid")?this._db.get(this.subscribeKey+"uuid"):"pn-"+i.default.createUUID())}}]),e}());t.default=s,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r={default:n(4)};t.default={createUUID:function(){return r.default.uuid?r.default.uuid():(0,r.default)()}},e.exports=t.default},function(e,t){var n,r;void 0!==(r="function"==typeof(n=function(e){function t(){var e,t,n="";for(e=0;e<32;e++)t=16*Math.random()|0,8!==e&&12!==e&&16!==e&&20!==e||(n+="-"),n+=(12===e?4:16===e?3&t|8:t).toString(16);return n}function n(e,t){var n=r[t||"all"];return n&&n.test(e)||!1}var r={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};t.isUUID=n,t.VERSION="0.1.0",e.uuid=t,e.isUUID=n})?n.apply(t,[t]):n)&&(e.exports=r)},function(e){e.exports={}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(r(n(2)),n(7)),o=r(s),a=function(){function e(t){var n=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._config=n,this._iv="0123456789012345",this._allowedKeyEncodings=["hex","utf8","base64","binary"],this._allowedKeyLengths=[128,256],this._allowedModes=["ecb","cbc"],this._defaultOptions={encryptKey:!0,keyEncoding:"utf8",keyLength:256,mode:"cbc"}}return i(e,[{key:"HMACSHA256",value:function(e){return o.default.HmacSHA256(e,this._config.secretKey).toString(o.default.enc.Base64)}},{key:"SHA256",value:function(e){return o.default.SHA256(e).toString(o.default.enc.Hex)}},{key:"_parseOptions",value:function(e){var t=e||{};return t.hasOwnProperty("encryptKey")||(t.encryptKey=this._defaultOptions.encryptKey),t.hasOwnProperty("keyEncoding")||(t.keyEncoding=this._defaultOptions.keyEncoding),t.hasOwnProperty("keyLength")||(t.keyLength=this._defaultOptions.keyLength),t.hasOwnProperty("mode")||(t.mode=this._defaultOptions.mode),-1===this._allowedKeyEncodings.indexOf(t.keyEncoding.toLowerCase())&&(t.keyEncoding=this._defaultOptions.keyEncoding),-1===this._allowedKeyLengths.indexOf(parseInt(t.keyLength,10))&&(t.keyLength=this._defaultOptions.keyLength),-1===this._allowedModes.indexOf(t.mode.toLowerCase())&&(t.mode=this._defaultOptions.mode),t}},{key:"_decodeKey",value:function(e,t){return"base64"===t.keyEncoding?o.default.enc.Base64.parse(e):"hex"===t.keyEncoding?o.default.enc.Hex.parse(e):e}},{key:"_getPaddedKey",value:function(e,t){return e=this._decodeKey(e,t),t.encryptKey?o.default.enc.Utf8.parse(this.SHA256(e).slice(0,32)):e}},{key:"_getMode",value:function(e){return"ecb"===e.mode?o.default.mode.ECB:o.default.mode.CBC}},{key:"_getIV",value:function(e){return"cbc"===e.mode?o.default.enc.Utf8.parse(this._iv):null}},{key:"encrypt",value:function(e,t,n){return this._config.customEncrypt?this._config.customEncrypt(e):this.pnEncrypt(e,t,n)}},{key:"decrypt",value:function(e,t,n){return this._config.customDecrypt?this._config.customDecrypt(e):this.pnDecrypt(e,t,n)}},{key:"pnEncrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),i=this._getMode(n),s=this._getPaddedKey(t||this._config.cipherKey,n);return o.default.AES.encrypt(e,s,{iv:r,mode:i}).ciphertext.toString(o.default.enc.Base64)||e}},{key:"pnDecrypt",value:function(e,t,n){if(!t&&!this._config.cipherKey)return e;n=this._parseOptions(n);var r=this._getIV(n),i=this._getMode(n),s=this._getPaddedKey(t||this._config.cipherKey,n);try{var a=o.default.enc.Base64.parse(e),u=o.default.AES.decrypt({ciphertext:a},s,{iv:r,mode:i}).toString(o.default.enc.Utf8);return JSON.parse(u)}catch(e){return null}}}]),e}();t.default=a,e.exports=t.default},function(e){var t=t||function(e){var t={},n=t.lib={},r=function(){},i=n.Base={extend:function(e){r.prototype=this;var t=new r;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=i.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-n%4*8,t.length=e.ceil(n/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new s.init(n,t)}}),o=t.enc={},a=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(n,t/2)}},u=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(n,t)}},c=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},l=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,o=this.blockSize,a=i/(4*o);a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0);if(i=e.min(4*(t=a*o),i),t){for(var u=0;u<t;u+=o)this._doProcessBlock(r,u);u=r.splice(0,t),n.sigBytes-=i}return new s.init(u,i)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});n.Hasher=l.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new h.HMAC.init(e,n).finalize(t)}}});var h=t.algo={};return t}(Math);!function(e){for(var n=t,r=(s=n.lib).WordArray,i=s.Hasher,s=n.algo,o=[],a=[],u=function(e){return 4294967296*(e-(0|e))|0},c=2,l=0;64>l;){var h;e:{for(var f=e.sqrt(h=c),d=2;d<=f;d++)if(!(h%d)){h=!1;break e}h=!0}h&&(8>l&&(o[l]=u(e.pow(c,.5))),a[l]=u(e.pow(c,1/3)),l++),c++}var p=[];s=s.SHA256=i.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(e,t){for(var n=this._hash.words,r=n[0],i=n[1],s=n[2],o=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=0;64>f;f++){if(16>f)p[f]=0|e[t+f];else{var d=p[f-15],g=p[f-2];p[f]=((d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3)+p[f-7]+((g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10)+p[f-16]}d=h+((u<<26|u>>>6)^(u<<21|u>>>11)^(u<<7|u>>>25))+(u&c^~u&l)+a[f]+p[f],g=((r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22))+(r&i^r&s^i&s),h=l,l=c,c=u,u=o+d|0,o=s,s=i,i=r,r=d+g|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+s|0,n[3]=n[3]+o|0,n[4]=n[4]+u|0,n[5]=n[5]+c|0,n[6]=n[6]+l|0,n[7]=n[7]+h|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[14+(i+64>>>9<<4)]=e.floor(r/4294967296),n[15+(i+64>>>9<<4)]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});n.SHA256=i._createHelper(s),n.HmacSHA256=i._createHmacHelper(s)}(Math),function(){var e=t.enc.Utf8;t.algo.HMAC=t.lib.Base.extend({init:function(t,n){t=this._hasher=new t.init,"string"==typeof n&&(n=e.parse(n));var r=t.blockSize,i=4*r;n.sigBytes>i&&(n=t.finalize(n)),n.clamp();for(var s=this._oKey=n.clone(),o=this._iKey=n.clone(),a=s.words,u=o.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;s.sigBytes=o.sigBytes=i,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;return e=t.finalize(e),t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e=t.lib.WordArray;t.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var s=(t[i>>>2]>>>24-i%4*8&255)<<16|(t[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|t[i+2>>>2]>>>24-(i+2)%4*8&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(s>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(t){var n=t.length,r=this._map;(i=r.charAt(64))&&-1!=(i=t.indexOf(i))&&(n=i);for(var i=[],s=0,o=0;o<n;o++)if(o%4){var a=r.indexOf(t.charAt(o-1))<<o%4*2,u=r.indexOf(t.charAt(o))>>>6-o%4*2;i[s>>>2]|=(a|u)<<24-s%4*8,s++}return e.create(i,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function n(e,t,n,r,i,s,o){return((e=e+(t&n|~t&r)+i+o)<<s|e>>>32-s)+t}function r(e,t,n,r,i,s,o){return((e=e+(t&r|n&~r)+i+o)<<s|e>>>32-s)+t}function i(e,t,n,r,i,s,o){return((e=e+(t^n^r)+i+o)<<s|e>>>32-s)+t}function s(e,t,n,r,i,s,o){return((e=e+(n^(t|~r))+i+o)<<s|e>>>32-s)+t}for(var o=t,a=(c=o.lib).WordArray,u=c.Hasher,c=o.algo,l=[],h=0;64>h;h++)l[h]=4294967296*e.abs(e.sin(h+1))|0;c=c.MD5=u.extend({_doReset:function(){this._hash=new a.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var o=0;16>o;o++){e[a=t+o]=16711935&((u=e[a])<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var a,u=e[t+1],c=e[t+2],h=e[t+3],f=e[t+4],d=e[t+5],p=e[t+6],g=e[t+7],y=e[t+8],b=e[t+9],v=e[t+10],_=e[t+11],m=e[t+12],k=e[t+13],w=e[t+14],O=e[t+15],T=n(T=(o=this._hash.words)[0],C=o[1],S=o[2],P=o[3],a=e[t+0],7,l[0]),P=n(P,T,C,S,u,12,l[1]),S=n(S,P,T,C,c,17,l[2]),C=n(C,S,P,T,h,22,l[3]);T=n(T,C,S,P,f,7,l[4]),P=n(P,T,C,S,d,12,l[5]),S=n(S,P,T,C,p,17,l[6]),C=n(C,S,P,T,g,22,l[7]),T=n(T,C,S,P,y,7,l[8]),P=n(P,T,C,S,b,12,l[9]),S=n(S,P,T,C,v,17,l[10]),C=n(C,S,P,T,_,22,l[11]),T=n(T,C,S,P,m,7,l[12]),P=n(P,T,C,S,k,12,l[13]),S=n(S,P,T,C,w,17,l[14]),T=r(T,C=n(C,S,P,T,O,22,l[15]),S,P,u,5,l[16]),P=r(P,T,C,S,p,9,l[17]),S=r(S,P,T,C,_,14,l[18]),C=r(C,S,P,T,a,20,l[19]),T=r(T,C,S,P,d,5,l[20]),P=r(P,T,C,S,v,9,l[21]),S=r(S,P,T,C,O,14,l[22]),C=r(C,S,P,T,f,20,l[23]),T=r(T,C,S,P,b,5,l[24]),P=r(P,T,C,S,w,9,l[25]),S=r(S,P,T,C,h,14,l[26]),C=r(C,S,P,T,y,20,l[27]),T=r(T,C,S,P,k,5,l[28]),P=r(P,T,C,S,c,9,l[29]),S=r(S,P,T,C,g,14,l[30]),T=i(T,C=r(C,S,P,T,m,20,l[31]),S,P,d,4,l[32]),P=i(P,T,C,S,y,11,l[33]),S=i(S,P,T,C,_,16,l[34]),C=i(C,S,P,T,w,23,l[35]),T=i(T,C,S,P,u,4,l[36]),P=i(P,T,C,S,f,11,l[37]),S=i(S,P,T,C,g,16,l[38]),C=i(C,S,P,T,v,23,l[39]),T=i(T,C,S,P,k,4,l[40]),P=i(P,T,C,S,a,11,l[41]),S=i(S,P,T,C,h,16,l[42]),C=i(C,S,P,T,p,23,l[43]),T=i(T,C,S,P,b,4,l[44]),P=i(P,T,C,S,m,11,l[45]),S=i(S,P,T,C,O,16,l[46]),T=s(T,C=i(C,S,P,T,c,23,l[47]),S,P,a,6,l[48]),P=s(P,T,C,S,g,10,l[49]),S=s(S,P,T,C,w,15,l[50]),C=s(C,S,P,T,d,21,l[51]),T=s(T,C,S,P,m,6,l[52]),P=s(P,T,C,S,h,10,l[53]),S=s(S,P,T,C,v,15,l[54]),C=s(C,S,P,T,u,21,l[55]),T=s(T,C,S,P,y,6,l[56]),P=s(P,T,C,S,O,10,l[57]),S=s(S,P,T,C,p,15,l[58]),C=s(C,S,P,T,k,21,l[59]),T=s(T,C,S,P,f,6,l[60]),P=s(P,T,C,S,_,10,l[61]),S=s(S,P,T,C,c,15,l[62]),C=s(C,S,P,T,b,21,l[63]);o[0]=o[0]+T|0,o[1]=o[1]+C|0,o[2]=o[2]+S|0,o[3]=o[3]+P|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var s=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),n=(t=this._hash).words,r=0;4>r;r++)n[r]=16711935&((i=n[r])<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=u._createHelper(c),o.HmacMD5=u._createHmacHelper(c)}(Math),function(){var e,n=t,r=(e=n.lib).Base,i=e.WordArray,s=(e=n.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=(a=this.cfg).hasher.create(),r=i.create(),s=r.words,o=a.keySize,a=a.iterations;s.length<o;){u&&n.update(u);var u=n.update(e).finalize(t);n.reset();for(var c=1;c<a;c++)u=n.finalize(u),n.reset();r.concat(u)}return r.sigBytes=4*o,r}});n.EvpKDF=function(e,t,n){return s.create(n).compute(e,t)}}(),t.lib.Cipher||function(){var e=(d=t).lib,n=e.Base,r=e.WordArray,i=e.BufferedBlockAlgorithm,s=d.enc.Base64,o=d.algo.EvpKDF,a=e.Cipher=i.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){i.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?p:f).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?p:f).decrypt(e,t,n,r)}}}});e.StreamCipher=a.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=d.mode={},c=function(e,t,n){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var i=0;i<n;i++)e[t+i]^=r[i]},l=(e.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;c.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),c.call(this,e,t,r),this._prevBlock=i}}),u=u.CBC=l,l=(d.pad={}).Pkcs7={pad:function(e,t){for(var n,i=(n=(n=4*t)-e.sigBytes%n)<<24|n<<16|n<<8|n,s=[],o=0;o<n;o+=4)s.push(i);n=r.create(s,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},e.BlockCipher=a.extend({cfg:a.cfg.extend({mode:u,padding:l}),reset:function(){a.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=e.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),f=(u=(d.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){var t=(e=s.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var n=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},e.SerializableCipher=n.extend({cfg:n.extend({format:u}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),h.create({ciphertext:t,key:n,iv:(i=i.cfg).iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),d=(d.kdf={}).OpenSSL={execute:function(e,t,n,i){return i||(i=r.random(8)),e=o.create({keySize:t+n}).compute(e,i),n=r.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:i})}},p=e.PasswordBasedCipher=f.extend({cfg:f.cfg.extend({kdf:d}),encrypt:function(e,t,n,r){return n=(r=this.cfg.extend(r)).kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,(e=f.encrypt.call(this,e,t,n.key,r)).mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,f.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=t,n=e.lib.BlockCipher,r=e.algo,i=[],s=[],o=[],a=[],u=[],c=[],l=[],h=[],f=[],d=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;var y=0,b=0;for(g=0;256>g;g++){var v;i[y]=v=(v=b^b<<1^b<<2^b<<3^b<<4)>>>8^255&v^99,s[v]=y;var _=p[y],m=p[_],k=p[m],w=257*p[v]^16843008*v;o[y]=w<<24|w>>>8,a[y]=w<<16|w>>>16,u[y]=w<<8|w>>>24,c[y]=w,l[v]=(w=16843009*k^65537*m^257*_^16843008*y)<<24|w>>>8,h[v]=w<<16|w>>>16,f[v]=w<<8|w>>>24,d[v]=w,y?(y=_^p[p[p[k^_]]],b^=p[p[b]]):y=b=1}var O=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=n.extend({_doReset:function(){for(var e=(n=this._key).words,t=n.sigBytes/4,n=4*((this._nRounds=t+6)+1),r=this._keySchedule=[],s=0;s<n;s++)if(s<t)r[s]=e[s];else{var o=r[s-1];s%t?6<t&&4==s%t&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=i[(o=o<<8|o>>>24)>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=O[s/t|0]<<24),r[s]=r[s-t]^o}for(e=this._invKeySchedule=[],t=0;t<n;t++)s=n-t,o=t%4?r[s]:r[s-4],e[t]=4>t||4>=s?o:l[i[o>>>24]]^h[i[o>>>16&255]]^f[i[o>>>8&255]]^d[i[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,a,u,c,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,l,h,f,d,s),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,s,o,a){for(var u=this._nRounds,c=e[t]^n[0],l=e[t+1]^n[1],h=e[t+2]^n[2],f=e[t+3]^n[3],d=4,p=1;p<u;p++){var g=r[c>>>24]^i[l>>>16&255]^s[h>>>8&255]^o[255&f]^n[d++],y=r[l>>>24]^i[h>>>16&255]^s[f>>>8&255]^o[255&c]^n[d++],b=r[h>>>24]^i[f>>>16&255]^s[c>>>8&255]^o[255&l]^n[d++];f=r[f>>>24]^i[c>>>16&255]^s[l>>>8&255]^o[255&h]^n[d++],c=g,l=y,h=b}g=(a[c>>>24]<<24|a[l>>>16&255]<<16|a[h>>>8&255]<<8|a[255&f])^n[d++],y=(a[l>>>24]<<24|a[h>>>16&255]<<16|a[f>>>8&255]<<8|a[255&c])^n[d++],b=(a[h>>>24]<<24|a[f>>>16&255]<<16|a[c>>>8&255]<<8|a[255&l])^n[d++],f=(a[f>>>24]<<24|a[c>>>16&255]<<16|a[l>>>8&255]<<8|a[255&h])^n[d++],e[t]=g,e[t+1]=y,e[t+2]=b,e[t+3]=f},keySize:8});e.AES=n._createHelper(r)}(),t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),e.Decryptor=e.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),e}(),e.exports=t},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(r(n(6)),n(2)),o=(r(s),n(9)),a=(r(o),n(11)),u=r(a),c=r(n(14)),l=r(n(15)),h=r((n(5),n(10))),f=function(){function e(t){var n=t.subscribeEndpoint,r=t.leaveEndpoint,i=t.heartbeatEndpoint,s=t.setStateEndpoint,o=t.timeEndpoint,a=t.config,l=t.crypto,h=t.listenerManager;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listenerManager=h,this._config=a,this._leaveEndpoint=r,this._heartbeatEndpoint=i,this._setStateEndpoint=s,this._subscribeEndpoint=n,this._crypto=l,this._channels={},this._presenceChannels={},this._heartbeatChannels={},this._heartbeatChannelGroups={},this._channelGroups={},this._presenceChannelGroups={},this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[],this._currentTimetoken=0,this._lastTimetoken=0,this._storedTimetoken=null,this._subscriptionStatusAnnounced=!1,this._isOnline=!0,this._reconnectionManager=new u.default({timeEndpoint:o}),this._dedupingManager=new c.default({config:a})}return i(e,[{key:"adaptStateChange",value:function(e,t){var n=this,r=e.state,i=e.channels,s=void 0===i?[]:i,o=e.channelGroups,a=void 0===o?[]:o;return s.forEach(function(e){e in n._channels&&(n._channels[e].state=r)}),a.forEach(function(e){e in n._channelGroups&&(n._channelGroups[e].state=r)}),this._setStateEndpoint({state:r,channels:s,channelGroups:a},t)}},{key:"adaptPresenceChange",value:function(e){var t=this,n=e.channels,r=void 0===n?[]:n,i=e.channelGroups,s=void 0===i?[]:i;e.connected?(r.forEach(function(e){t._heartbeatChannels[e]={state:{}}}),s.forEach(function(e){t._heartbeatChannelGroups[e]={state:{}}})):(r.forEach(function(e){e in t._heartbeatChannels&&delete t._heartbeatChannels[e]}),s.forEach(function(e){e in t._heartbeatChannelGroups&&delete t._heartbeatChannelGroups[e]}),!1===this._config.suppressLeaveEvents&&this._leaveEndpoint({channels:r,channelGroups:s},function(e){t._listenerManager.announceStatus(e)})),this.reconnect()}},{key:"adaptSubscribeChange",value:function(e){var t=this,n=e.timetoken,r=e.channels,i=void 0===r?[]:r,s=e.channelGroups,o=void 0===s?[]:s,a=e.withPresence,u=void 0!==a&&a,c=e.withHeartbeats,l=void 0!==c&&c;this._config.subscribeKey&&""!==this._config.subscribeKey?(n&&(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=n),"0"!==this._currentTimetoken&&0!==this._currentTimetoken&&(this._storedTimetoken=this._currentTimetoken,this._currentTimetoken=0),i.forEach(function(e){t._channels[e]={state:{}},u&&(t._presenceChannels[e]={}),(l||t._config.getHeartbeatInterval())&&(t._heartbeatChannels[e]={}),t._pendingChannelSubscriptions.push(e)}),o.forEach(function(e){t._channelGroups[e]={state:{}},u&&(t._presenceChannelGroups[e]={}),(l||t._config.getHeartbeatInterval())&&(t._heartbeatChannelGroups[e]={}),t._pendingChannelGroupSubscriptions.push(e)}),this._subscriptionStatusAnnounced=!1,this.reconnect()):console&&console}},{key:"adaptUnsubscribeChange",value:function(e,t){var n=this,r=e.channels,i=e.channelGroups,s=void 0===i?[]:i,o=[],a=[];(void 0===r?[]:r).forEach(function(e){e in n._channels&&(delete n._channels[e],o.push(e),e in n._heartbeatChannels&&delete n._heartbeatChannels[e]),e in n._presenceChannels&&(delete n._presenceChannels[e],o.push(e))}),s.forEach(function(e){e in n._channelGroups&&(delete n._channelGroups[e],a.push(e),e in n._heartbeatChannelGroups&&delete n._heartbeatChannelGroups[e]),e in n._presenceChannelGroups&&(delete n._channelGroups[e],a.push(e))}),0===o.length&&0===a.length||(!1!==this._config.suppressLeaveEvents||t||this._leaveEndpoint({channels:o,channelGroups:a},function(e){e.affectedChannels=o,e.affectedChannelGroups=a,e.currentTimetoken=n._currentTimetoken,e.lastTimetoken=n._lastTimetoken,n._listenerManager.announceStatus(e)}),0===Object.keys(this._channels).length&&0===Object.keys(this._presenceChannels).length&&0===Object.keys(this._channelGroups).length&&0===Object.keys(this._presenceChannelGroups).length&&(this._lastTimetoken=0,this._currentTimetoken=0,this._storedTimetoken=null,this._region=null,this._reconnectionManager.stopPolling()),this.reconnect())}},{key:"unsubscribeAll",value:function(e){this.adaptUnsubscribeChange({channels:this.getSubscribedChannels(),channelGroups:this.getSubscribedChannelGroups()},e)}},{key:"getHeartbeatChannels",value:function(){return Object.keys(this._heartbeatChannels)}},{key:"getHeartbeatChannelGroups",value:function(){return Object.keys(this._heartbeatChannelGroups)}},{key:"getSubscribedChannels",value:function(){return Object.keys(this._channels)}},{key:"getSubscribedChannelGroups",value:function(){return Object.keys(this._channelGroups)}},{key:"reconnect",value:function(){this._startSubscribeLoop(),this._registerHeartbeatTimer()}},{key:"disconnect",value:function(){this._stopSubscribeLoop(),this._stopHeartbeatTimer(),this._reconnectionManager.stopPolling()}},{key:"_registerHeartbeatTimer",value:function(){this._stopHeartbeatTimer(),0!==this._config.getHeartbeatInterval()&&(this._performHeartbeatLoop(),this._heartbeatTimer=setInterval(this._performHeartbeatLoop.bind(this),1e3*this._config.getHeartbeatInterval()))}},{key:"_stopHeartbeatTimer",value:function(){this._heartbeatTimer&&(clearInterval(this._heartbeatTimer),this._heartbeatTimer=null)}},{key:"_performHeartbeatLoop",value:function(){var e=this,t=this.getHeartbeatChannels(),n=this.getHeartbeatChannelGroups(),r={};0===t.length&&0===n.length||(this.getSubscribedChannels().forEach(function(t){var n=e._channels[t].state;Object.keys(n).length&&(r[t]=n)}),this.getSubscribedChannelGroups().forEach(function(t){var n=e._channelGroups[t].state;Object.keys(n).length&&(r[t]=n)}),this._heartbeatEndpoint({channels:t,channelGroups:n,state:r},function(t){t.error&&e._config.announceFailedHeartbeats&&e._listenerManager.announceStatus(t),t.error&&e._config.autoNetworkDetection&&e._isOnline&&(e._isOnline=!1,e.disconnect(),e._listenerManager.announceNetworkDown(),e.reconnect()),!t.error&&e._config.announceSuccessfulHeartbeats&&e._listenerManager.announceStatus(t)}.bind(this)))}},{key:"_startSubscribeLoop",value:function(){var e=this;this._stopSubscribeLoop();var t={},n=[],r=[];(Object.keys(this._channels).forEach(function(r){var i=e._channels[r].state;Object.keys(i).length&&(t[r]=i),n.push(r)}),Object.keys(this._presenceChannels).forEach(function(e){n.push(e+"-pnpres")}),Object.keys(this._channelGroups).forEach(function(n){var i=e._channelGroups[n].state;Object.keys(i).length&&(t[n]=i),r.push(n)}),Object.keys(this._presenceChannelGroups).forEach(function(e){r.push(e+"-pnpres")}),0!==n.length||0!==r.length)&&(this._subscribeCall=this._subscribeEndpoint({channels:n,channelGroups:r,state:t,timetoken:this._currentTimetoken,filterExpression:this._config.filterExpression,region:this._region},this._processSubscribeResponse.bind(this)))}},{key:"_processSubscribeResponse",value:function(e,t){var n=this;if(e.error)e.category===h.default.PNTimeoutCategory?this._startSubscribeLoop():e.category===h.default.PNNetworkIssuesCategory?(this.disconnect(),e.error&&this._config.autoNetworkDetection&&this._isOnline&&(this._isOnline=!1,this._listenerManager.announceNetworkDown()),this._reconnectionManager.onReconnection(function(){n._config.autoNetworkDetection&&!n._isOnline&&(n._isOnline=!0,n._listenerManager.announceNetworkUp()),n.reconnect(),n._subscriptionStatusAnnounced=!0,n._listenerManager.announceStatus({category:h.default.PNReconnectedCategory,operation:e.operation,lastTimetoken:n._lastTimetoken,currentTimetoken:n._currentTimetoken})}),this._reconnectionManager.startPolling(),this._listenerManager.announceStatus(e)):e.category===h.default.PNBadRequestCategory?(this._stopHeartbeatTimer(),this._listenerManager.announceStatus(e)):this._listenerManager.announceStatus(e);else{if(this._storedTimetoken?(this._currentTimetoken=this._storedTimetoken,this._storedTimetoken=null):(this._lastTimetoken=this._currentTimetoken,this._currentTimetoken=t.metadata.timetoken),!this._subscriptionStatusAnnounced){var r={};r.category=h.default.PNConnectedCategory,r.operation=e.operation,r.affectedChannels=this._pendingChannelSubscriptions,r.subscribedChannels=this.getSubscribedChannels(),r.affectedChannelGroups=this._pendingChannelGroupSubscriptions,r.lastTimetoken=this._lastTimetoken,r.currentTimetoken=this._currentTimetoken,this._subscriptionStatusAnnounced=!0,this._listenerManager.announceStatus(r),this._pendingChannelSubscriptions=[],this._pendingChannelGroupSubscriptions=[]}var i=t.messages||[],s=this._config,o=s.requestMessageCountThreshold,a=s.dedupeOnSubscribe;if(o&&i.length>=o){var u={};u.category=h.default.PNRequestMessageCountExceededCategory,u.operation=e.operation,this._listenerManager.announceStatus(u)}i.forEach(function(e){var t=e.channel,r=e.subscriptionMatch,i=e.publishMetaData;if(t===r&&(r=null),a){if(n._dedupingManager.isDuplicate(e))return;n._dedupingManager.addEntry(e)}if(l.default.endsWith(e.channel,"-pnpres")){var s={channel:null,subscription:null};s.actualChannel=null!=r?t:null,s.subscribedChannel=null!=r?r:t,t&&(s.channel=t.substring(0,t.lastIndexOf("-pnpres"))),r&&(s.subscription=r.substring(0,r.lastIndexOf("-pnpres"))),s.action=e.payload.action,s.state=e.payload.data,s.timetoken=i.publishTimetoken,s.occupancy=e.payload.occupancy,s.uuid=e.payload.uuid,s.timestamp=e.payload.timestamp,e.payload.join&&(s.join=e.payload.join),e.payload.leave&&(s.leave=e.payload.leave),e.payload.timeout&&(s.timeout=e.payload.timeout),n._listenerManager.announcePresence(s)}else{var o={channel:null,subscription:null};o.actualChannel=null!=r?t:null,o.subscribedChannel=null!=r?r:t,o.channel=t,o.subscription=r,o.timetoken=i.publishTimetoken,o.publisher=e.issuingClientId,e.userMetadata&&(o.userMetadata=e.userMetadata),o.message=n._config.cipherKey?n._crypto.decrypt(e.payload):e.payload,n._listenerManager.announceMessage(o)}}),this._region=t.metadata.region,this._startSubscribeLoop()}}},{key:"_stopSubscribeLoop",value:function(){this._subscribeCall&&("function"==typeof this._subscribeCall.abort&&this._subscribeCall.abort(),this._subscribeCall=null)}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i={default:(n(5),n(10))},s=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._listeners=[]}return r(e,[{key:"addListener",value:function(e){this._listeners.push(e)}},{key:"removeListener",value:function(e){var t=[];this._listeners.forEach(function(n){n!==e&&t.push(n)}),this._listeners=t}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"announcePresence",value:function(e){this._listeners.forEach(function(t){t.presence&&t.presence(e)})}},{key:"announceStatus",value:function(e){this._listeners.forEach(function(t){t.status&&t.status(e)})}},{key:"announceMessage",value:function(e){this._listeners.forEach(function(t){t.message&&t.message(e)})}},{key:"announceNetworkUp",value:function(){var e={};e.category=i.default.PNNetworkUpCategory,this.announceStatus(e)}},{key:"announceNetworkDown",value:function(){var e={};e.category=i.default.PNNetworkDownCategory,this.announceStatus(e)}}]),e}();t.default=s,e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNNetworkUpCategory:"PNNetworkUpCategory",PNNetworkDownCategory:"PNNetworkDownCategory",PNNetworkIssuesCategory:"PNNetworkIssuesCategory",PNTimeoutCategory:"PNTimeoutCategory",PNBadRequestCategory:"PNBadRequestCategory",PNAccessDeniedCategory:"PNAccessDeniedCategory",PNUnknownCategory:"PNUnknownCategory",PNReconnectedCategory:"PNReconnectedCategory",PNConnectedCategory:"PNConnectedCategory",PNRequestMessageCountExceededCategory:"PNRequestMessageCountExceededCategory"},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(12),n(5),function(){function e(t){var n=t.timeEndpoint;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._timeEndpoint=n}return r(e,[{key:"onReconnection",value:function(e){this._reconnectionCallback=e}},{key:"startPolling",value:function(){this._timeTimer=setInterval(this._performTimeLoop.bind(this),3e3)}},{key:"stopPolling",value:function(){clearInterval(this._timeTimer)}},{key:"_performTimeLoop",value:function(){var e=this;this._timeEndpoint(function(t){t.error||(clearInterval(e._timeTimer),e._reconnectionCallback())})}}]),e}());t.default=i,e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNTimeOperation},t.getURL=function(){return"/time/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.isAuthSupported=function(){return!1},t.handleResponse=function(e,t){return{timetoken:t[0]}},t.validateParams=function(){};var r={default:(n(5),n(13))}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={PNTimeOperation:"PNTimeOperation",PNHistoryOperation:"PNHistoryOperation",PNDeleteMessagesOperation:"PNDeleteMessagesOperation",PNFetchMessagesOperation:"PNFetchMessagesOperation",PNMessageCounts:"PNMessageCountsOperation",PNSubscribeOperation:"PNSubscribeOperation",PNUnsubscribeOperation:"PNUnsubscribeOperation",PNPublishOperation:"PNPublishOperation",PNPushNotificationEnabledChannelsOperation:"PNPushNotificationEnabledChannelsOperation",PNRemoveAllPushNotificationsOperation:"PNRemoveAllPushNotificationsOperation",PNWhereNowOperation:"PNWhereNowOperation",PNSetStateOperation:"PNSetStateOperation",PNHereNowOperation:"PNHereNowOperation",PNGetStateOperation:"PNGetStateOperation",PNHeartbeatOperation:"PNHeartbeatOperation",PNChannelGroupsOperation:"PNChannelGroupsOperation",PNRemoveGroupOperation:"PNRemoveGroupOperation",PNChannelsForGroupOperation:"PNChannelsForGroupOperation",PNAddChannelsToGroupOperation:"PNAddChannelsToGroupOperation",PNRemoveChannelsFromGroupOperation:"PNRemoveChannelsFromGroupOperation",PNAccessManagerGrant:"PNAccessManagerGrant",PNAccessManagerAudit:"PNAccessManagerAudit"},e.exports=t.default},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(n(2),n(5),function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n+=1)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t}),s=function(){function e(t){var n=t.config;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.hashHistory=[],this._config=n}return r(e,[{key:"getKey",value:function(e){var t=i(JSON.stringify(e.payload)).toString();return e.publishMetaData.publishTimetoken+"-"+t}},{key:"isDuplicate",value:function(e){return this.hashHistory.includes(this.getKey(e))}},{key:"addEntry",value:function(e){this.hashHistory.length>=this._config.maximumCacheSize&&this.hashHistory.shift(),this.hashHistory.push(this.getKey(e))}},{key:"clearHistory",value:function(){this.hashHistory=[]}}]),e}();t.default=s,e.exports=t.default},function(e){function t(e){return encodeURIComponent(e).replace(/[!~*'()]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}e.exports={signPamFromParams:function(e){return function(e){return function(e){var t=[];return Object.keys(e).forEach(function(e){return t.push(e)}),t}(e).sort()}(e).map(function(n){return n+"="+t(e[n])}).join("&")},endsWith:function(e,t){return-1!==e.indexOf(t,this.length-t.length)},createPromise:function(){var e=void 0,t=void 0;return{promise:new Promise(function(n,r){e=n,t=r}),reject:t,fulfill:e}},encodeString:t}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(e){return e.type="validationError",e.error=!0,e}({message:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=e.networking,r=e.config,a=null,l=null,h={};t.getOperation()===u.default.PNTimeOperation||t.getOperation()===u.default.PNChannelGroupsOperation?a=arguments.length<=2?void 0:arguments[2]:(h=arguments.length<=2?void 0:arguments[2],a=arguments.length<=3?void 0:arguments[3]),"undefined"==typeof Promise||a||(l=o.default.createPromise());var f=t.validateParams(e,h);if(!f){var d=t.prepareParams(e,h),p=function(e,t,n){return e.usePost&&e.usePost(t,n)?e.postURL(t,n):e.getURL(t,n)}(t,e,h),g=void 0,y={url:p,operation:t.getOperation(),timeout:t.getRequestTimeout(e)};d.uuid=r.UUID,d.pnsdk=function(){if(r.sdkName)return r.sdkName;var e="PubNub-JS-"+r.sdkFamily;return r.partnerId&&(e+="-"+r.partnerId),e+"/"+r.getVersion()}(),r.useInstanceId&&(d.instanceid=r.instanceId),r.useRequestId&&(d.requestid=s.default.createUUID()),t.isAuthSupported()&&r.getAuthKey()&&(d.auth=r.getAuthKey()),r.secretKey&&function(e,t,n){var r=e.config,i=e.crypto;n.timestamp=Math.floor((new Date).getTime()/1e3);var s=r.subscribeKey+"\n"+r.publishKey+"\n"+t+"\n";s+=o.default.signPamFromParams(n);var a=i.HMACSHA256(s);a=(a=a.replace(/\+/g,"-")).replace(/\//g,"_"),n.signature=a}(e,p,d);var b=function(n,r){if(n.error)a?a(n):l&&l.reject(new c("PubNub call failed, check status for details",n));else{var i=t.handleResponse(e,r,h);a?a(n,i):l&&l.fulfill(i)}};if(t.usePost&&t.usePost(e,h)){var v=t.postPayload(e,h);g=n.POST(d,v,y,b)}else g=t.useDelete&&t.useDelete()?n.DELETE(d,y,b):n.GET(d,y,b);return t.getOperation()===u.default.PNSubscribeOperation?g:l?l.promise:void 0}return a?a(i(f)):l?(l.reject(new c("Validation failed, check status for details",i(f))),l.promise):void 0};var s=r(n(3)),o=r((n(5),n(15))),a=(r(n(2)),n(13)),u=r(a),c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return r.name=r.constructor.name,r.status=n,r.message=t,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,Error),e}();e.exports=t.default},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNAddChannelsToGroupOperation},t.validateParams=function(e,t){var n=t.channels;return t.channelGroup?n&&0!==n.length?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(t.channelGroup)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveChannelsFromGroupOperation},t.validateParams=function(e,t){var n=t.channels;return t.channelGroup?n&&0!==n.length?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing Channel Group"},t.getURL=function(e,t){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(t.channelGroup)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNRemoveGroupOperation},t.validateParams=function(e,t){return t.channelGroup?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(t.channelGroup)+"/remove"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(){return{}},t.handleResponse=function(){return{}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNChannelGroupsOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{groups:t.payload.groups}};var r={default:(n(5),n(13))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNChannelsForGroupOperation},t.validateParams=function(e,t){return t.channelGroup?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channel Group"},t.getURL=function(e,t){return"/v1/channel-registration/sub-key/"+e.config.subscribeKey+"/channel-group/"+s.default.encodeString(t.channelGroup)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return{channels:t.payload.channels}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.channels;return t.device?t.pushGateway?n&&0!==n.length?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+t.device},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{type:t.pushGateway,add:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var r={default:(n(5),n(13))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){var n=t.channels;return t.device?t.pushGateway?n&&0!==n.length?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Channels":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+t.device},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channels;return{type:t.pushGateway,remove:(void 0===n?[]:n).join(",")}},t.handleResponse=function(){return{}};var r={default:(n(5),n(13))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNPushNotificationEnabledChannelsOperation},t.validateParams=function(e,t){return t.device?t.pushGateway?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+t.device},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(e,t){return{channels:t}};var r={default:(n(5),n(13))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNRemoveAllPushNotificationsOperation},t.validateParams=function(e,t){return t.device?t.pushGateway?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing GW Type (pushGateway: gcm or apns)":"Missing Device ID (device)"},t.getURL=function(e,t){return"/v1/push/sub-key/"+e.config.subscribeKey+"/devices/"+t.device+"/remove"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){return{type:t.pushGateway}},t.handleResponse=function(){return{}};var r={default:(n(5),n(13))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNUnsubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(o)+"/leave"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(){return{}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNWhereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid;return"/v2/presence/sub-key/"+n.subscribeKey+"/uuid/"+(void 0===r?n.UUID:r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(){return{}},t.handleResponse=function(e,t){return t.payload?{channels:t.payload.channels}:{channels:[]}};var r={default:(n(5),n(13))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHeartbeatOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(o)+"/heartbeat"},t.isAuthSupported=function(){return!0},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.state,s=void 0===i?{}:i,o=e.config,a={};return r.length>0&&(a["channel-group"]=r.join(",")),a.state=JSON.stringify(s),a.heartbeat=o.getPresenceTimeout(),a},t.handleResponse=function(){return{}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNGetStateOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.uuid,i=void 0===r?n.UUID:r,o=t.channels,a=void 0===o?[]:o,u=a.length>0?a.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(u)+"/uuid/"+i},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,s=n.channelGroups,o={};return 1===i.length&&0===(void 0===s?[]:s).length?o[i[0]]=t.payload:o=t.payload,{channels:o}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSetStateOperation},t.validateParams=function(e,t){var n=t.channels,r=t.channelGroups;return t.state?e.config.subscribeKey?0===(void 0===n?[]:n).length&&0===(void 0===r?[]:r).length?"Please provide a list of channels and/or channel-groups":void 0:"Missing Subscribe Key":"Missing State"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/presence/sub-key/"+n.subscribeKey+"/channel/"+s.default.encodeString(o)+"/uuid/"+n.UUID+"/data"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i={};return i.state=JSON.stringify(t.state),r.length>0&&(i["channel-group"]=r.join(",")),i},t.handleResponse=function(e,t){return{state:t.payload}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNHereNowOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,o="/v2/presence/sub-key/"+e.config.subscribeKey;if(r.length>0||(void 0===i?[]:i).length>0){var a=r.length>0?r.join(","):",";o+="/channel/"+s.default.encodeString(a)}return o},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.channelGroups,r=void 0===n?[]:n,i=t.includeUUIDs,s=t.includeState,o=void 0!==s&&s,a={};return void 0===i||i||(a.disable_uuids=1),o&&(a.state=1),r.length>0&&(a["channel-group"]=r.join(",")),a},t.handleResponse=function(e,t,n){var r=n.channels,i=void 0===r?[]:r,s=n.channelGroups,o=void 0===s?[]:s,a=n.includeUUIDs,u=void 0===a||a,c=n.includeState,l=void 0!==c&&c;return i.length>1||o.length>0||0===o.length&&0===i.length?function(){var e={};return e.totalChannels=t.payload.total_channels,e.totalOccupancy=t.payload.total_occupancy,e.channels={},Object.keys(t.payload.channels).forEach(function(n){var r=t.payload.channels[n],i=[];return e.channels[n]={occupants:i,name:n,occupancy:r.occupancy},u&&r.uuids.forEach(function(e){i.push(l?{state:e.state,uuid:e.uuid}:{state:null,uuid:e})}),e}),e}():function(){var e={},n=[];return e.totalChannels=1,e.totalOccupancy=t.occupancy,e.channels={},e.channels[i[0]]={occupants:n,name:i[0],occupancy:t.occupancy},u&&t.uuids&&t.uuids.forEach(function(e){n.push(l?{state:e.state,uuid:e.uuid}:{state:null,uuid:e})}),e}()};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAccessManagerAudit},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/audit/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channel,r=t.channelGroup,i=t.authKeys,s=void 0===i?[]:i,o={};return n&&(o.channel=n),r&&(o["channel-group"]=r),s.length>0&&(o.auth=s.join(",")),o},t.handleResponse=function(e,t){return t.payload};var r={default:(n(5),n(13))}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return r.default.PNAccessManagerGrant},t.validateParams=function(e){var t=e.config;return t.subscribeKey?t.publishKey?t.secretKey?void 0:"Missing Secret Key":"Missing Publish Key":"Missing Subscribe Key"},t.getURL=function(e){return"/v2/auth/grant/sub-key/"+e.config.subscribeKey},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!1},t.prepareParams=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=t.channelGroups,s=void 0===i?[]:i,o=t.ttl,a=t.read,u=t.write,c=void 0!==u&&u,l=t.manage,h=void 0!==l&&l,f=t.authKeys,d=void 0===f?[]:f,p={};return p.r=void 0!==a&&a?"1":"0",p.w=c?"1":"0",p.m=h?"1":"0",r.length>0&&(p.channel=r.join(",")),s.length>0&&(p["channel-group"]=s.join(",")),d.length>0&&(p.auth=d.join(",")),(o||0===o)&&(p.ttl=o),p},t.handleResponse=function(){return{}};var r={default:(n(5),n(13))}},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.crypto,r=e.config,i=JSON.stringify(t);return r.cipherKey&&(i=n.encrypt(i),i=JSON.stringify(i)),i}Object.defineProperty(t,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.getOperation=function(){return o.default.PNPublishOperation},t.validateParams=function(e,t){return t.channel?t.message?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing Message":"Missing Channel"},t.usePost=function(e,t){var n=t.sendByPost;return void 0!==n&&n},t.getURL=function(e,t){var n=e.config,r=t.channel,s=i(e,t.message);return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+a.default.encodeString(r)+"/0/"+a.default.encodeString(s)},t.postURL=function(e,t){var n=e.config;return"/publish/"+n.publishKey+"/"+n.subscribeKey+"/0/"+a.default.encodeString(t.channel)+"/0"},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.postPayload=function(e,t){return i(e,t.message)},t.prepareParams=function(e,t){var n=t.meta,r=t.replicate,i=void 0===r||r,o=t.storeInHistory,a=t.ttl,u={};return null!=o&&(u.store=o?"1":"0"),a&&(u.ttl=a),!1===i&&(u.norep="true"),n&&"object"===(void 0===n?"undefined":s(n))&&(u.meta=JSON.stringify(n)),u},t.handleResponse=function(e,t){return{timetoken:t[2]}};var o=r((n(5),n(13))),a=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n=e.crypto;if(!e.config.cipherKey)return t;try{return n.decrypt(t)}catch(e){return t}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return s.default.PNHistoryOperation},t.validateParams=function(e,t){return t.channel?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){return"/v2/history/sub-key/"+e.config.subscribeKey+"/channel/"+o.default.encodeString(t.channel)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.reverse,s=t.count,o=t.stringifiedTimeToken,a=void 0!==o&&o,u={include_token:"true"};return u.count=void 0===s?100:s,n&&(u.start=n),r&&(u.end=r),a&&(u.string_message_token="true"),null!=i&&(u.reverse=i.toString()),u},t.handleResponse=function(e,t){var n={messages:[],startTimeToken:t[1],endTimeToken:t[2]};return t[0].forEach(function(t){var r={timetoken:t.timetoken,entry:i(e,t.message)};n.messages.push(r)}),n};var s=r((n(5),n(13))),o=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNDeleteMessagesOperation},t.validateParams=function(e,t){return t.channel?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.useDelete=function(){return!0},t.getURL=function(e,t){return"/v3/history/sub-key/"+e.config.subscribeKey+"/channel/"+s.default.encodeString(t.channel)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i={};return n&&(i.start=n),r&&(i.end=r),i},t.handleResponse=function(e,t){return t.payload};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});t.getOperation=function(){return i.default.PNMessageCounts},t.validateParams=function(e,t){var n=t.channels,r=t.timetoken,i=t.channelTimetokens;return n?r&&i?"timetoken and channelTimetokens are incompatible together":r&&i&&i.length>1&&n.length!==i.length?"Length of channelTimetokens and channels do not match":e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing channel"},t.getURL=function(e,t){var n=e.config,r=t.channels.join(",");return"/v3/history/sub-key/"+n.subscribeKey+"/message-counts/"+s.default.encodeString(r)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.timetoken,r=t.channelTimetokens,i={};if(r&&1===r.length){var s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,s=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(r,1);i.timetoken=s[0]}else r?i.channelsTimetoken=r.join(","):n&&(i.timetoken=n);return i},t.handleResponse=function(e,t){return{channels:t.channels}};var i=r(n(13)),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNFetchMessagesOperation},t.validateParams=function(e,t){var n=t.channels;return n&&0!==n.length?e.config.subscribeKey?void 0:"Missing Subscribe Key":"Missing channels"},t.getURL=function(e,t){var n=t.channels,r=void 0===n?[]:n,i=e.config,o=r.length>0?r.join(","):",";return"/v3/history/sub-key/"+i.subscribeKey+"/channel/"+s.default.encodeString(o)},t.getRequestTimeout=function(e){return e.config.getTransactionTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.start,r=t.end,i=t.count,s=t.stringifiedTimeToken,o=void 0!==s&&s,a={};return i&&(a.max=i),n&&(a.start=n),r&&(a.end=r),o&&(a.string_message_token="true"),a},t.handleResponse=function(e,t){var n={channels:{}};return Object.keys(t.channels||{}).forEach(function(r){n.channels[r]=[],(t.channels[r]||[]).forEach(function(t){var i={};i.channel=r,i.subscription=null,i.timetoken=t.timetoken,i.message=function(e,t){var n=e.crypto;if(!e.config.cipherKey)return t;try{return n.decrypt(t)}catch(e){return t}}(e,t.message),n.channels[r].push(i)})}),n};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getOperation=function(){return i.default.PNSubscribeOperation},t.validateParams=function(e){if(!e.config.subscribeKey)return"Missing Subscribe Key"},t.getURL=function(e,t){var n=e.config,r=t.channels,i=void 0===r?[]:r,o=i.length>0?i.join(","):",";return"/v2/subscribe/"+n.subscribeKey+"/"+s.default.encodeString(o)+"/0"},t.getRequestTimeout=function(e){return e.config.getSubscribeTimeout()},t.isAuthSupported=function(){return!0},t.prepareParams=function(e,t){var n=t.state,r=t.channelGroups,i=void 0===r?[]:r,s=t.timetoken,o=t.filterExpression,a=t.region,u={heartbeat:e.config.getPresenceTimeout()};return i.length>0&&(u["channel-group"]=i.join(",")),o&&o.length>0&&(u["filter-expr"]=o),Object.keys(n).length&&(u.state=JSON.stringify(n)),s&&(u.tt=s),a&&(u.tr=a),u},t.handleResponse=function(e,t){var n=[];return t.m.forEach(function(e){var t={publishTimetoken:e.p.t,region:e.p.r},r={shard:parseInt(e.a,10),subscriptionMatch:e.b,channel:e.c,payload:e.d,flags:e.f,issuingClientId:e.i,subscribeKey:e.k,originationTimetoken:e.o,userMetadata:e.u,publishMetaData:t};n.push(r)}),{messages:n,metadata:{timetoken:t.t.t,region:t.t.r}}};var i=r((n(5),n(13))),s=r(n(15))},function(e,t,n){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(r(n(2)),n(10)),o=r(s),a=(n(5),function(){function e(t){var n=this;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this._modules={},Object.keys(t).forEach(function(e){n._modules[e]=t[e].bind(n)})}return i(e,[{key:"init",value:function(e){this._config=e,this._maxSubDomain=20,this._currentSubDomain=Math.floor(Math.random()*this._maxSubDomain),this._providedFQDN=(this._config.secure?"https://":"http://")+this._config.origin,this._coreParams={},this.shiftStandardOrigin()}},{key:"nextOrigin",value:function(){if(-1===this._providedFQDN.indexOf("ps."))return this._providedFQDN;var e;return this._currentSubDomain=this._currentSubDomain+1,this._currentSubDomain>=this._maxSubDomain&&(this._currentSubDomain=1),e=this._currentSubDomain.toString(),this._providedFQDN.replace("ps.","ps"+e+".")}},{key:"hasModule",value:function(e){return e in this._modules}},{key:"shiftStandardOrigin",value:function(){return this._standardOrigin=this.nextOrigin(arguments.length>0&&void 0!==arguments[0]&&arguments[0]),this._standardOrigin}},{key:"getStandardOrigin",value:function(){return this._standardOrigin}},{key:"POST",value:function(e,t,n,r){return this._modules.post(e,t,n,r)}},{key:"GET",value:function(e,t,n){return this._modules.get(e,t,n)}},{key:"DELETE",value:function(e,t,n){return this._modules.del(e,t,n)}},{key:"_detectErrorCategory",value:function(e){if("ENOTFOUND"===e.code)return o.default.PNNetworkIssuesCategory;if("ECONNREFUSED"===e.code)return o.default.PNNetworkIssuesCategory;if("ECONNRESET"===e.code)return o.default.PNNetworkIssuesCategory;if("EAI_AGAIN"===e.code)return o.default.PNNetworkIssuesCategory;if(0===e.status||e.hasOwnProperty("status")&&void 0===e.status)return o.default.PNNetworkIssuesCategory;if(e.timeout)return o.default.PNTimeoutCategory;if("ETIMEDOUT"===e.code)return o.default.PNNetworkIssuesCategory;if(e.response){if(e.response.badRequest)return o.default.PNBadRequestCategory;if(e.response.forbidden)return o.default.PNAccessDeniedCategory}return o.default.PNUnknownCategory}}]),e}());t.default=a,e.exports=t.default},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={get:function(e){try{return localStorage.getItem(e)}catch(e){return null}},set:function(e,t){try{return localStorage.setItem(e,t)}catch(e){return null}}},e.exports=t.default},function(e,t,n){function r(e){var t=(new Date).getTime(),n=(new Date).toISOString(),r=console&&console.log?console:window&&window.console&&window.console.log?window.console:console;r.log("<<<<<"),r.log("["+n+"]","\n",e.url,"\n",e.qs),r.log("-----"),e.on("response",function(n){var i=(new Date).getTime()-t,s=(new Date).toISOString();r.log(">>>>>>"),r.log("["+s+" / "+i+"]","\n",e.url,"\n",e.qs,"\n",n.text),r.log("-----")})}function i(e,t,n){var i=this;return this._config.logVerbosity&&(e=e.use(r)),this._config.proxy&&this._modules.proxy&&(e=this._modules.proxy.call(this,e)),this._config.keepAlive&&this._modules.keepAlive&&(e=this._modules.keepAlive(e)),e.timeout(t.timeout).end(function(e,r){var s=void 0,o={};if(o.error=null!==e,o.operation=t.operation,r&&r.status&&(o.statusCode=r.status),e){if(e.response&&e.response.text&&!i._config.logVerbosity)try{o.errorData=JSON.parse(e.response.text)}catch(t){o.errorData=e}else o.errorData=e;return o.category=i._detectErrorCategory(e),n(o,null)}try{s=JSON.parse(r.text)}catch(e){return o.errorData=r,o.error=!0,n(o,null)}return s.error&&1===s.error&&s.status&&s.message&&s.service?(o.errorData=s,o.statusCode=s.status,o.error=!0,o.category=i._detectErrorCategory(o),n(o,null)):n(o,s)})}Object.defineProperty(t,"__esModule",{value:!0}),t.get=function(e,t,n){var r=s.default.get(this.getStandardOrigin()+t.url).query(e);return i.call(this,r,t,n)},t.post=function(e,t,n,r){var o=s.default.post(this.getStandardOrigin()+n.url).query(e).send(t);return i.call(this,o,n,r)},t.del=function(e,t,n){var r=s.default.delete(this.getStandardOrigin()+t.url).query(e);return i.call(this,r,t,n)};var s={default:n(43)};n(5)},function(e,t,n){function r(){}function i(e){if(!p(e))return e;var t=[];for(var n in e)s(t,n,e[n]);return t.join("&")}function s(e,t,n){if(null!=n)if(Array.isArray(n))n.forEach(function(n){s(e,t,n)});else if(p(n))for(var r in n)s(e,t+"["+r+"]",n[r]);else e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));else null===n&&e.push(encodeURIComponent(t))}function o(e){for(var t,n,r={},i=e.split("&"),s=0,o=i.length;s<o;++s)-1==(n=(t=i[s]).indexOf("="))?r[decodeURIComponent(t)]="":r[decodeURIComponent(t.slice(0,n))]=decodeURIComponent(t.slice(n+1));return r}function a(e){return/[\/+]json($|[^-\w])/.test(e)}function u(e){this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var t=this.xhr.status;1223===t&&(t=204),this._setStatusProperties(t),this.header=this.headers=function(e){for(var t,n,r,i,s=e.split(/\r?\n/),o={},a=0,u=s.length;a<u;++a)-1!==(t=(n=s[a]).indexOf(":"))&&(r=n.slice(0,t).toLowerCase(),i=v(n.slice(t+1)),o[r]=i);return o}(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),this.body=null===this.text&&e._responseType?this.xhr.response:"HEAD"!=this.req.method?this._parseBody(this.text?this.text:this.xhr.response):null}function c(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e,t=null,r=null;try{r=new u(n)}catch(r){return(t=new Error("Parser is unable to parse the response")).parse=!0,t.original=r,n.xhr?(t.rawResponse=void 0===n.xhr.responseType?n.xhr.responseText:n.xhr.response,t.status=n.xhr.status?n.xhr.status:null,t.statusCode=t.status):(t.rawResponse=null,t.status=null),n.callback(t)}n.emit("response",r);try{n._isResponseOK(r)||(e=new Error(r.statusText||"Unsuccessful HTTP response"))}catch(t){e=t}e?(e.original=t,e.response=r,e.status=r.status,n.callback(e,r)):n.callback(null,r)})}function l(e,t,n){var r=b("DELETE",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}var h;"undefined"!=typeof window?h=window:"undefined"!=typeof self?h=self:(console.warn("Using browser-only version of superagent in non-browser environment"),h=this);var f=n(44),d=n(45),p=n(46),g=n(47),y=n(49),b=t=e.exports=function(e,n){return"function"==typeof n?new t.Request("GET",e).end(n):1==arguments.length?new t.Request("GET",e):new t.Request(e,n)};t.Request=c,b.getXHR=function(){if(!(!h.XMLHttpRequest||h.location&&"file:"==h.location.protocol&&h.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}throw Error("Browser-only version of superagent could not find XHR")};var v="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=i,b.parseString=o,b.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":i,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":o,"application/json":JSON.parse},g(u.prototype),u.prototype._parseBody=function(e){var t=b.parse[this.type];return this.req._parser?this.req._parser(this,e):(!t&&a(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null)},u.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r=new Error("cannot "+t+" "+n+" ("+this.status+")");return r.status=this.status,r.method=t,r.url=n,r},b.Response=u,f(c.prototype),d(c.prototype),c.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},c.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},c.prototype.auth=function(e,t,n){return 1===arguments.length&&(t=""),"object"==typeof t&&null!==t&&(n=t,t=""),n||(n={type:"function"==typeof btoa?"basic":"auto"}),this._auth(e,t,n,function(e){if("function"==typeof btoa)return btoa(e);throw new Error("Cannot use basic auth, btoa is not a function")})},c.prototype.query=function(e){return"string"!=typeof e&&(e=i(e)),e&&this._query.push(e),this},c.prototype.attach=function(e,t,n){if(t){if(this._data)throw Error("superagent can't mix .send() and .attach()");this._getFormData().append(e,t,n||t.name)}return this},c.prototype._getFormData=function(){return this._formData||(this._formData=new h.FormData),this._formData},c.prototype.callback=function(e,t){if(this._shouldRetry(e,t))return this._retry();var n=this._callback;this.clearTimeout(),e&&(this._maxRetries&&(e.retries=this._retries-1),this.emit("error",e)),n(e,t)},c.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},c.prototype.buffer=c.prototype.ca=c.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},c.prototype.pipe=c.prototype.write=function(){throw Error("Streaming is not supported in browser version of superagent")},c.prototype._isHost=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&"[object Object]"!==Object.prototype.toString.call(e)},c.prototype.end=function(e){return this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=e||r,this._finalizeQueryString(),this._end()},c.prototype._end=function(){var e=this,t=this.xhr=b.getXHR(),n=this._formData||this._data;this._setTimeouts(),t.onreadystatechange=function(){var n=t.readyState;if(n>=2&&e._responseTimeoutTimer&&clearTimeout(e._responseTimeoutTimer),4==n){var r;try{r=t.status}catch(e){r=0}if(!r){if(e.timedout||e._aborted)return;return e.crossDomainError()}e.emit("end")}};var r=function(t,n){n.total>0&&(n.percent=n.loaded/n.total*100),n.direction=t,e.emit("progress",n)};if(this.hasListeners("progress"))try{t.onprogress=r.bind(null,"download"),t.upload&&(t.upload.onprogress=r.bind(null,"upload"))}catch(e){}try{this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0)}catch(e){return this.callback(e)}if(this._withCredentials&&(t.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof n&&!this._isHost(n)){var i=this._header["content-type"],s=this._serializer||b.serialize[i?i.split(";")[0]:""];!s&&a(i)&&(s=b.serialize["application/json"]),s&&(n=s(n))}for(var o in this.header)null!=this.header[o]&&this.header.hasOwnProperty(o)&&t.setRequestHeader(o,this.header[o]);return this._responseType&&(t.responseType=this._responseType),this.emit("request",this),t.send(void 0!==n?n:null),this},b.agent=function(){return new y},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(e){y.prototype[e.toLowerCase()]=function(t,n){var r=new b.Request(e,t);return this._setDefaults(r),n&&r.end(n),r}}),y.prototype.del=y.prototype.delete,b.get=function(e,t,n){var r=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.head=function(e,t,n){var r=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.options=function(e,t,n){var r=b("OPTIONS",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.del=l,b.delete=l,b.patch=function(e,t,n){var r=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.post=function(e,t,n){var r=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.put=function(e,t,n){var r=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n)for(var r=0,i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t);return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=n(46);e.exports=r,r.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this},r.prototype.parse=function(e){return this._parser=e,this},r.prototype.responseType=function(e){return this._responseType=e,this},r.prototype.serialize=function(e){return this._serializer=e,this},r.prototype.timeout=function(e){if(!e||"object"!=typeof e)return this._timeout=e,this._responseTimeout=0,this;for(var t in e)switch(t){case"deadline":this._timeout=e.deadline;break;case"response":this._responseTimeout=e.response;break;default:console.warn("Unknown timeout option",t)}return this},r.prototype.retry=function(e,t){return 0!==arguments.length&&!0!==e||(e=1),e<=0&&(e=0),this._maxRetries=e,this._retries=0,this._retryCallback=t,this};var s=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];r.prototype._shouldRetry=function(e,t){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var n=this._retryCallback(e,t);if(!0===n)return!0;if(!1===n)return!1}catch(e){console.error(e)}if(t&&t.status&&t.status>=500&&501!=t.status)return!0;if(e){if(e.code&&~s.indexOf(e.code))return!0;if(e.timeout&&"ECONNABORTED"==e.code)return!0;if(e.crossDomain)return!0}return!1},r.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this._end()},r.prototype.then=function(e,t){if(!this._fullfilledPromise){var n=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(e,t){n.end(function(n,r){n?t(n):e(r)})})}return this._fullfilledPromise.then(e,t)},r.prototype.catch=function(e){return this.then(void 0,e)},r.prototype.use=function(e){return e(this),this},r.prototype.ok=function(e){if("function"!=typeof e)throw Error("Callback required");return this._okCallback=e,this},r.prototype._isResponseOK=function(e){return!!e&&(this._okCallback?this._okCallback(e):e.status>=200&&e.status<300)},r.prototype.getHeader=r.prototype.get=function(e){return this._header[e.toLowerCase()]},r.prototype.set=function(e,t){if(i(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},r.prototype.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},r.prototype.field=function(e,t){if(null==e)throw new Error(".field(name, val) name can not be empty");if(this._data&&console.error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()"),i(e)){for(var n in e)this.field(n,e[n]);return this}if(Array.isArray(t)){for(var r in t)this.field(e,t[r]);return this}if(null==t)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof t&&(t=""+t),this._getFormData().append(e,t),this},r.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},r.prototype._auth=function(e,t,n,r){switch(n.type){case"basic":this.set("Authorization","Basic "+r(e+":"+t));break;case"auto":this.username=e,this.password=t;break;case"bearer":this.set("Authorization","Bearer "+e)}return this},r.prototype.withCredentials=function(e){return null==e&&(e=!0),this._withCredentials=e,this},r.prototype.redirects=function(e){return this._maxRedirects=e,this},r.prototype.maxResponseSize=function(e){if("number"!=typeof e)throw TypeError("Invalid argument");return this._maxResponseSize=e,this},r.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},r.prototype.send=function(e){var t=i(e),n=this._header["content-type"];if(this._formData&&console.error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()"),t&&!this._data)Array.isArray(e)?this._data=[]:this._isHost(e)||(this._data={});else if(e&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(t&&i(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),this._data="application/x-www-form-urlencoded"==(n=this._header["content-type"])?this._data?this._data+"&"+e:e:(this._data||"")+e):this._data=e;return!t||this._isHost(e)?this:(n||this.type("json"),this)},r.prototype.sortQuery=function(e){return this._sort=void 0===e||e,this},r.prototype._finalizeQueryString=function(){var e=this._query.join("&");if(e&&(this.url+=(this.url.indexOf("?")>=0?"&":"?")+e),this._query.length=0,this._sort){var t=this.url.indexOf("?");if(t>=0){var n=this.url.substring(t+1).split("&");"function"==typeof this._sort?n.sort(this._sort):n.sort(),this.url=this.url.substring(0,t)+"?"+n.join("&")}}},r.prototype._appendQueryString=function(){console.trace("Unsupported")},r.prototype._timeoutError=function(e,t,n){if(!this._aborted){var r=new Error(e+t+"ms exceeded");r.timeout=t,r.code="ECONNABORTED",r.errno=n,this.timedout=!0,this.abort(),this.callback(r)}},r.prototype._setTimeouts=function(){var e=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){e._timeoutError("Timeout of ",e._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){e._timeoutError("Response timeout of ",e._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},function(e){e.exports=function(e){return null!==e&&"object"==typeof e}},function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}var i=n(48);e.exports=r,r.prototype.get=function(e){return this.header[e.toLowerCase()]},r.prototype._setHeaderProperties=function(e){var t=e["content-type"]||"";this.type=i.type(t);var n=i.params(t);for(var r in n)this[r]=n[r];this.links={};try{e.link&&(this.links=i.parseLinks(e.link))}catch(e){}},r.prototype._setStatusProperties=function(e){var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.redirect=3==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.created=201==e,this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.forbidden=403==e,this.notFound=404==e,this.unprocessableEntity=422==e}},function(e,t){t.type=function(e){return e.split(/ *; */).shift()},t.params=function(e){return e.split(/ *; */).reduce(function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})},t.parseLinks=function(e){return e.split(/ *, */).reduce(function(e,t){var n=t.split(/ *; */),r=n[0].slice(1,-1);return e[n[1].split(/ *= */)[1].slice(1,-1)]=r,e},{})},t.cleanHeader=function(e,t){return delete e["content-type"],delete e["content-length"],delete e["transfer-encoding"],delete e.host,t&&(delete e.authorization,delete e.cookie),e}},function(e){function t(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert"].forEach(function(e){t.prototype[e]=function(){return this._defaults.push({fn:e,arguments}),this}}),t.prototype._setDefaults=function(e){this._defaults.forEach(function(t){e[t.fn].apply(e,t.arguments)})},e.exports=t}])}))&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var a;function u(e,t){const n=h(e,t);if(n)return n.image}function c(e,t){const n=h(e,t);if(n)return n.name}function l(e,t){return t===e?"senderMessage":e}function h(e,t){return e.find(e=>e.uuid===t)}function f(e){return new Date(parseInt(e.substring(0,13))).toLocaleTimeString("en-US",{hour:"numeric",hour12:!0,minute:"numeric"})}function d(e){return new Date(parseInt(e.substring(0,13))).toLocaleDateString("en-US",{weekday:"long"})}function p(e,t){const n=d(e),r=new Date(parseInt(e.substring(0,13))).toLocaleDateString("en-US",{day:"numeric",month:"long"});switch(t){case"historyMessage":case"senderMessage":return`${r}, ${n}`;default:return}}var g=s(function(e,t){var n="Expected a function",r=1,s=2,o=1/0,a=9007199254740991,u="[object Arguments]",c="[object Array]",l="[object Boolean]",h="[object Date]",f="[object Error]",d="[object Function]",p="[object GeneratorFunction]",g="[object Map]",y="[object Number]",b="[object Object]",v="[object RegExp]",_="[object Set]",m="[object String]",k="[object Symbol]",w="[object ArrayBuffer]",O="[object DataView]",T=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,P=/^\w*$/,S=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,E=/\\(\\)?/g,M=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,x={};x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Uint8Array]"]=x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0,x[u]=x[c]=x[w]=x[l]=x[O]=x[h]=x[f]=x[d]=x[g]=x[y]=x[b]=x[v]=x[_]=x[m]=x["[object WeakMap]"]=!1;var j="object"==typeof i&&i&&i.Object===Object&&i,A="object"==typeof self&&self&&self.Object===Object&&self,U=j||A||Function("return this")(),R=t&&!t.nodeType&&t,D=R&&e&&!e.nodeType&&e,I=D&&D.exports===R&&j.process,K=function(){try{return I&&I.binding("util")}catch(e){}}(),L=K&&K.isTypedArray;function G(e,t){return!(!e||!e.length)&&function(e,t){if(t!=t)return function(e,t){for(var n=e.length,r=-1;++r<n;)if(t(e[r],r,e))return r;return-1}(e,B);for(var n=-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}(e,t)>-1}function H(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return!0;return!1}function B(e){return e!=e}function q(e,t){return e.has(t)}function F(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var X,$,J,V=Array.prototype,Q=Function.prototype,Y=Object.prototype,Z=U["__core-js_shared__"],ee=(X=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+X:"",te=Q.toString,ne=Y.hasOwnProperty,re=Y.toString,ie=RegExp("^"+te.call(ne).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=U.Symbol,oe=U.Uint8Array,ae=Y.propertyIsEnumerable,ue=V.splice,ce=($=Object.keys,J=Object,function(e){return $(J(e))}),le=Ie(U,"DataView"),he=Ie(U,"Map"),fe=Ie(U,"Promise"),de=Ie(U,"Set"),pe=Ie(U,"WeakMap"),ge=Ie(Object,"create"),ye=ze(le),be=ze(he),ve=ze(fe),_e=ze(de),me=ze(pe),ke=se?se.prototype:void 0,we=ke?ke.valueOf:void 0,Oe=ke?ke.toString:void 0;function Te(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Pe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ce(e){var t=-1,n=e?e.length:0;for(this.__data__=new Se;++t<n;)this.add(e[t])}function Ee(e){this.__data__=new Pe(e)}function Me(e,t){for(var n=e.length;n--;)if(Xe(e[n][0],t))return n;return-1}function Ne(e,t){for(var n=0,r=(t=Ge(t,e)?[t]:Ae(t)).length;null!=e&&n<r;)e=e[Fe(t[n++])];return n&&n==r?e:void 0}function xe(e,t){return null!=e&&t in Object(e)}function je(e,t,n,i,o){return e===t||(null==e||null==t||!Ze(e)&&!et(t)?e!=e&&t!=t:function(e,t,n,i,o,a){var d=Je(e),p=Je(t),T=c,P=c;d||(T=(T=Ke(e))==u?b:T),p||(P=(P=Ke(t))==u?b:P);var S=T==b&&!F(e),C=P==b&&!F(t),E=T==P;if(E&&!S)return a||(a=new Ee),d||nt(e)?Re(e,t,n,i,o,a):function(e,t,n,i,o,a,u){switch(T){case O:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!i(new oe(e),new oe(t)));case l:case h:case y:return Xe(+e,+t);case f:return e.name==t.name&&e.message==t.message;case v:case m:return e==t+"";case g:var c=z;case _:if(c||(c=W),e.size!=t.size&&!(a&s))return!1;var d=u.get(e);if(d)return d==t;a|=r,u.set(e,t);var p=Re(c(e),c(t),i,o,a,u);return u.delete(e),p;case k:if(we)return we.call(e)==we.call(t)}return!1}(e,t,0,n,i,o,a);if(!(o&s)){var M=S&&ne.call(e,"__wrapped__"),N=C&&ne.call(t,"__wrapped__");if(M||N){var x=M?e.value():e,j=N?t.value():t;return a||(a=new Ee),n(x,j,i,o,a)}}return!!E&&(a||(a=new Ee),function(e,t,n,r,i,o){var a=i&s,u=rt(e),c=u.length;if(c!=rt(t).length&&!a)return!1;for(var l=c;l--;){var h=u[l];if(!(a?h in t:ne.call(t,h)))return!1}var f=o.get(e);if(f&&o.get(t))return f==t;var d=!0;o.set(e,t),o.set(t,e);for(var p=a;++l<c;){var g=e[h=u[l]],y=t[h];if(r)var b=a?r(y,g,h,t,e,o):r(g,y,h,e,t,o);if(!(void 0===b?g===y||n(g,y,r,i,o):b)){d=!1;break}p||(p="constructor"==h)}if(d&&!p){var v=e.constructor,_=t.constructor;v!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof _&&_ instanceof _)&&(d=!1)}return o.delete(e),o.delete(t),d}(e,t,n,i,o,a))}(e,t,je,n,i,o))}function Ae(e){return Je(e)?e:qe(e)}Te.prototype.clear=function(){this.__data__=ge?ge(null):{}},Te.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Te.prototype.get=function(e){var t=this.__data__;if(ge){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ne.call(t,e)?t[e]:void 0},Te.prototype.has=function(e){var t=this.__data__;return ge?void 0!==t[e]:ne.call(t,e)},Te.prototype.set=function(e,t){return this.__data__[e]=ge&&void 0===t?"__lodash_hash_undefined__":t,this},Pe.prototype.clear=function(){this.__data__=[]},Pe.prototype.delete=function(e){var t=this.__data__,n=Me(t,e);return!(n<0||(n==t.length-1?t.pop():ue.call(t,n,1),0))},Pe.prototype.get=function(e){var t=this.__data__,n=Me(t,e);return n<0?void 0:t[n][1]},Pe.prototype.has=function(e){return Me(this.__data__,e)>-1},Pe.prototype.set=function(e,t){var n=this.__data__,r=Me(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Se.prototype.clear=function(){this.__data__={hash:new Te,map:new(he||Pe),string:new Te}},Se.prototype.delete=function(e){return De(this,e).delete(e)},Se.prototype.get=function(e){return De(this,e).get(e)},Se.prototype.has=function(e){return De(this,e).has(e)},Se.prototype.set=function(e,t){return De(this,e).set(e,t),this},Ce.prototype.add=Ce.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ce.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new Pe},Ee.prototype.delete=function(e){return this.__data__.delete(e)},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Pe){var r=n.__data__;if(!he||r.length<199)return r.push([e,t]),this;n=this.__data__=new Se(r)}return n.set(e,t),this};var Ue=de&&1/W(new de([,-0]))[1]==o?function(e){return new de(e)}:function(){};function Re(e,t,n,i,o,a){var u=o&s,c=e.length,l=t.length;if(c!=l&&!(u&&l>c))return!1;var h=a.get(e);if(h&&a.get(t))return h==t;var f=-1,d=!0,p=o&r?new Ce:void 0;for(a.set(e,t),a.set(t,e);++f<c;){var g=e[f],y=t[f];if(i)var b=u?i(y,g,f,t,e,a):i(g,y,f,e,t,a);if(void 0!==b){if(b)continue;d=!1;break}if(p){if(!H(t,function(e,t){if(!p.has(t)&&(g===e||n(g,e,i,o,a)))return p.add(t)})){d=!1;break}}else if(g!==y&&!n(g,y,i,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function De(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Ie(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ze(e)||ee&&ee in e)&&(Qe(e)||F(e)?ie:M).test(ze(e))}(n)?n:void 0}var Ke=function(e){return re.call(e)};function Le(e,t){return!!(t=null==t?a:t)&&("number"==typeof e||N.test(e))&&e>-1&&e%1==0&&e<t}function Ge(e,t){if(Je(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!tt(e))||P.test(e)||!T.test(e)||null!=t&&e in Object(t)}function He(e){return e==e&&!Ze(e)}function Be(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}(le&&Ke(new le(new ArrayBuffer(1)))!=O||he&&Ke(new he)!=g||fe&&"[object Promise]"!=Ke(fe.resolve())||de&&Ke(new de)!=_||pe&&"[object WeakMap]"!=Ke(new pe))&&(Ke=function(e){var t=re.call(e),n=t==b?e.constructor:void 0,r=n?ze(n):void 0;if(r)switch(r){case ye:return O;case be:return g;case ve:return"[object Promise]";case _e:return _;case me:return"[object WeakMap]"}return t});var qe=We(function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(tt(e))return Oe?Oe.call(e):"";var t=e+"";return"0"==t&&1/e==-o?"-0":t}(t);var n=[];return S.test(e)&&n.push(""),e.replace(C,function(e,t,r,i){n.push(r?i.replace(E,"$1"):t||e)}),n});function Fe(e){if("string"==typeof e||tt(e))return e;var t=e+"";return"0"==t&&1/e==-o?"-0":t}function ze(e){if(null!=e){try{return te.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function We(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(n);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o),o};return r.cache=new(We.Cache||Se),r}function Xe(e,t){return e===t||e!=e&&t!=t}function $e(e){return function(e){return et(e)&&Ve(e)}(e)&&ne.call(e,"callee")&&(!ae.call(e,"callee")||re.call(e)==u)}We.Cache=Se;var Je=Array.isArray;function Ve(e){return null!=e&&Ye(e.length)&&!Qe(e)}function Qe(e){var t=Ze(e)?re.call(e):"";return t==d||t==p}function Ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function Ze(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function et(e){return!!e&&"object"==typeof e}function tt(e){return"symbol"==typeof e||et(e)&&re.call(e)==k}var nt=L?function(e){return function(t){return e(t)}}(L):function(e){return et(e)&&Ye(e.length)&&!!x[re.call(e)]};function rt(e){return Ve(e)?function(e,t){var n=Je(e)||$e(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],r=n.length,i=!!r;for(var s in e)!t&&!ne.call(e,s)||i&&("length"==s||Le(s,r))||n.push(s);return n}(e):function(e){if((t=e)!==("function"==typeof(n=t&&t.constructor)&&n.prototype||Y))return ce(e);var t,n,r=[];for(var i in Object(e))ne.call(e,i)&&"constructor"!=i&&r.push(i);return r}(e)}function it(e){return e}e.exports=function(e,t){return e&&e.length?function(e,t){var n=-1,r=G,i=e.length,s=!0,o=[],a=o;if(i>=200){var u=t?null:Ue(e);if(u)return W(u);s=!1,r=q,a=new Ce}else a=t?[]:o;e:for(;++n<i;){var c=e[n],l=t?t(c):c;if(c=0!==c?c:0,s&&l==l){for(var h=a.length;h--;)if(a[h]===l)continue e;t&&a.push(l),o.push(c)}else r(a,l,void 0)||(a!==o&&a.push(l),o.push(c))}return o}(e,"function"==typeof(n=t)?n:null==n?it:"object"==typeof n?Je(n)?function(e,t){return Ge(e)&&He(t)?Be(Fe(e),t):function(n){var i=function(e,t){var n=null==e?void 0:Ne(e,t);return void 0===n?void 0:n}(n,e);return void 0===i&&i===t?function(e,t){return null!=e&&function(e,t,n){for(var r,i=-1,s=(t=Ge(t,e)?[t]:Ae(t)).length;++i<s;){var o=Fe(t[i]);if(!(r=null!=e&&n(e,o)))break;e=e[o]}return r||!!(s=e?e.length:0)&&Ye(s)&&Le(o,s)&&(Je(e)||$e(e))}(e,t,xe)}(n,e):je(t,i,void 0,r|s)}}(n[0],n[1]):1==(o=function(e){for(var t=rt(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,He(i)]}return t}(i=n)).length&&o[0][2]?Be(o[0][0],o[0][1]):function(e){return e===i||function(e,t,n){var i=n.length,o=i;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=n[i])[0],c=e[u],l=a[1];if(a[2]){if(void 0===c&&!(u in e))return!1}else{var h,f=new Ee;if(!(void 0===h?je(l,c,void 0,r|s,f):h))return!1}}return!0}(e,0,o)}:Ge(a=n)?(u=Fe(a),function(e){return null==e?void 0:e[u]}):function(e){return function(t){return Ne(t,e)}}(a)):[];var n,i,o,a,u}});class y{constructor(n){e(this,n),this.parsedUsers=[],this.channelName="test-channel",this.onlineUsersCount=0,this.messageReceived=t(this,"messageReceived",7)}componentWillLoad(){this.parsedUsers=JSON.parse(this.users),this.parsedUsers=g(this.parsedUsers,"uuid"),this.pubnub=new o({publishKey:"pub-c-2c10eb4d-5066-4241-99f9-d82430455cf9",subscribeKey:"sub-c-a6263802-9dd9-11e9-8df4-32dd89bcc96f",autoNetworkDetection:!0,restore:!0}),this.sendersInfo=[],this.lastMessageWeekday="",this.messageSentDate=[],this.historyLoaded=!1,this.historyMessages=[],this.onlineUsers=[],this.onlineUsersCount=0,this.networkErrorStatus=!1,this.networkErrorImg=null}componentDidLoad(){this.pubnub.subscribe({channels:[this.channelName],withPresence:!0}),this.pubnub.addListener({status:e=>{"PNConnectedCategory"===e.category&&(this.hereNow(),this.pubnub.history({channel:this.channelName,count:50,reverse:!1,stringifiedTimeToken:!0}).then(e=>{const t=d(e.endTimeToken);this.historyLoaded=!0,this.historyMessages=e.messages,this.lastMessageWeekday=t;let n=this.historyMessages.map(e=>d(e.timetoken));this.messageSentDate=n,this.scrollToBottom()}).catch(()=>{})),"PNNetworkDownCategory"===e.category&&(this.networkErrorStatus=!0),"PNNetworkUpCategory"===e.category&&(this.networkErrorStatus=!1,this.pubnub.reconnect(),this.scrollToBottom())},message:e=>{this.sendersInfo=[...this.sendersInfo,{senderId:e.message.senderId,text:e.message.text,timetoken:e.timetoken}];const t=d(e.timetoken);this.lastMessageWeekday=t,this.scrollToBottom()},presence:e=>{if("join"===e.action&&(this.onlineUsers=[...this.onlineUsers,{state:e.state,uuid:e.uuid}],this.onlineUsersCount=this.onlineUsersCount+1),"leave"===e.action||"timeout"===e.action){let t=this.onlineUsers.filter(t=>t.uuid!==e.uuid);this.onlineUsers=t,this.onlineUsersCount=this.onlineUsers.length}if("interval"===e.action&&(e.join||e.leave||e.timeout)){let t=this.onlineUsers,n=this.onlineUsersCount;e.join&&(e.join.map(n=>n!==this.uuid&&t.push({state:e.state,uuid:n})),n+=e.join.length),e.leave&&(e.leave.map(e=>t.splice(t.indexOf(e),1)),n-=e.leave.length),e.timeout&&(e.timeout.map(e=>t.splice(t.indexOf(e),1)),n-=e.timeout.length),this.onlineUsers=t,this.onlineUsersCount=n}}}),window.addEventListener("beforeunload",this.leaveChat)}componentWillUnmount(){this.leaveChat()}subscribe(){this.pubnub.subscribe({channels:this.channelName,withPresence:!0})}hereNow(){this.pubnub.hereNow({channels:[this.channelName],includeUUIDs:!0,includeState:!1},(e,t)=>{this.onlineUsers=t.channels[this.channelName].occupants,this.hydrateUsers()})}hydrateUsers(){this.onlineUsers=this.parsedUsers.concat(this.onlineUsers),this.onlineUsers=this.onlineUsers.map(e=>({uuid:e.uuid,name:c(this.parsedUsers,e.uuid),image:u(this.parsedUsers,e.uuid)})).filter(e=>e.name&&e.name.length>1),this.onlineUsersCount=this.onlineUsers.length}leaveChat(){this.pubnub.unsubscribeAll()}scrollToBottom(){const e=this.messageList.shadowRoot.querySelector(".messageDialog");e&&setTimeout(()=>{e.scrollTop=e.scrollHeight},100)}render(){return n("div",{class:"grid"},n("iac-header",{userProfile:this.userProfile,onlineUsersCount:this.onlineUsersCount}),n("iac-message-list",{sendersInfo:this.sendersInfo,messageSentDate:"July 12, 2019",historyLoaded:this.historyLoaded,historyMessages:this.historyMessages,users:this.parsedUsers,uuid:this.uuid,ref:e=>this.messageList=e}),n("iac-message-body",{pubnub:this.pubnub,uuid:this.uuid,channelName:this.channelName}),n("iac-online-users",{loggedInUser:"x9skdkdkslsddkjfsk",onlineUsers:this.onlineUsers}))}get el(){return r(this)}static get style(){return":host{width:100vw;height:85vh;position:relative;margin-bottom:0}\@media (max-width:850px){:host{height:81vh}}:host .grid{display:grid;width:100%;grid-template-rows:70px 700px 60px;grid-template-columns:280px 1fr}"}}class b{constructor(t){e(this,t)}componentWillLoad(){this.parsedUserProfile=JSON.parse(this.userProfile)}render(){return n("div",{class:"header"},n("div",{class:"onlineUsersInfo"},n("img",{class:"onlineUsersLogo",width:"45",height:"45",alt:"Online users logo",src:"https://picsum.photos/id/641/45/45"}),n("div",{class:"onlineUsersCount"},this.onlineUsersCount," members"),n("span",null,"Online"),n("span",{class:"onlineIndicator"})),n("img",{class:"animalForestChatLogo",width:"45",height:"45",alt:"Animal Forest Chat logo",src:"https://picsum.photos/id/641/45/45"}),n("h1",null,"Clio Chat"),n("h2",null,"In-App Firm Chat"),n("div",{class:"loggedInUser"},n("div",{class:"userWelcome"},n("span",{class:"hello"},"Hello, "),n("span",{class:"user"},this.parsedUserProfile.name)),n("img",{width:"45",height:"45",alt:`Avatar for ${this.parsedUserProfile.name}`,src:this.parsedUserProfile.image})))}static get style(){return":host{grid-row:1;grid-column:1/3;width:100%;position:relative;border:1px solid hsla(0,0%,50.2%,.164)}:host .onlineUsersInfo{width:278px;height:70px;position:relative;font-size:17px;font-weight:700;border-right:1px solid hsla(0,0%,50.2%,.164)}:host .onlineUsersInfo .onlineUsersLogo{position:absolute;top:10px;left:10px;border-radius:50%}:host .onlineUsersInfo .onlineUsersCount{position:relative;top:14px;left:68px}:host .onlineUsersInfo span{position:absolute;top:33px;left:80px;color:grey;font-weight:400;display:block}:host .onlineUsersInfo .onlineIndicator{width:8px;height:8px;position:absolute;top:40px;left:68px;border-radius:50%;background-color:#0ccc0c}:host .animalForestChatLogo{display:none!important;position:absolute;top:12px;left:290px}:host h1{font-weight:700;font-size:17px;top:2px}:host h1,:host h2{position:absolute;left:295px}:host h2{font-weight:400;font-size:15px;top:20px}:host .loggedInUser{display:none!important;position:absolute;top:12px;right:20px;color:grey}:host .loggedInUser .userWelcome .user{display:block;color:#000;font-weight:700}:host .loggedInUser img{position:absolute;top:0;left:-50px}"}}class v{constructor(t){e(this,t)}render(){return n("div",null,this.historyLoaded&&n("div",{class:"historyMessageDialog"},this.historyMessages.map(e=>n("li",{class:l(e.entry.senderId,this.uuid),key:e.timetoken},n("div",{class:"message"},n("img",{width:"28",height:"28",alt:"Sender avatar",src:u(this.users,e.entry.senderId)}),n("div",{class:"name"},c(this.users,e.entry.senderId)),n("div",{class:"time"},f(e.timetoken),n("div",{class:"date"}," on ",p(e.timetoken,"historyMessage"))),n("div",{class:"text"},e.entry.text))))))}static get style(){return".historyMessageDialog{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.historyMessageDialog li{position:relative;margin-top:40px;margin-left:8px;width:100%;margin-bottom:18px}.historyMessageDialog li img{border-radius:50%;vertical-align:middle;margin-right:12px}.historyMessageDialog li .message{position:relative;word-break:break-word;word-wrap:break-word}.historyMessageDialog li .message .name,.historyMessageDialog li .message .time{right:5px;font-size:12px;color:grey;font-weight:700;position:absolute}.historyMessageDialog li .message .text{max-width:270px;padding:15px;display:inline-block;border-radius:10px;background-color:#1f9efc;color:#fff}.messageSentDay{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;position:relative;width:100%;top:-20px;margin-top:0;margin-bottom:30px;color:grey;font-size:13px}.messageSentDay:empty{display:none}.name,.time{left:5px}.name{top:-18px}.time{width:100%;bottom:-18px}.time .date{opacity:.5;display:inline}.text{background-color:hsla(0,0%,50.2%,.164)}.historyMessageDialog li.senderMessage .message{-ms-flex-item-align:end;align-self:flex-end;margin-right:50px;color:grey;text-align:right}.historyMessageDialog li.senderMessage .message .text{max-width:270px;padding:15px;display:inline-block;border-radius:10px;background-color:#999;color:#fff}.historyMessageDialog li.senderMessage .message .name,.historyMessageDialog li.senderMessage .message .time{left:unset;right:5px;font-size:11px;color:grey;font-weight:700;position:absolute}"}}class _{constructor(t){e(this,t)}componentWillLoad(){this.messageContent=""}handleKeyDown(e){"Enter"===e.key&&this.sendMessage()}onChange(e){this.messageContent=e.target.value}onSubmit(e){e.preventDefault(),this.sendMessage()}sendMessage(){this.messageContent.length&&(this.pubnub.publish({message:{senderId:this.uuid,text:this.messageContent},channel:this.channelName}),setTimeout(()=>{this.messageContent=""},0))}render(){return n("div",{class:"messageBody"},n("form",{class:"messageForm"},n("input",{class:"messageInput",value:this.messageContent,onChange:e=>this.onChange(e),placeholder:"Type your message here . . ."}),n("button",{class:"submitBtn",onClick:e=>this.onSubmit(e),type:"submit"},"Send")))}static get style(){return":host{grid-row:3;grid-column:2;position:relative}\@media (max-width:770px){:host{grid-column:1/3}}:host .messageForm{width:calc(100% - 24px);position:absolute;z-index:100;border-top:1px solid hsla(0,0%,50.2%,.164);border-bottom:1px solid hsla(0,0%,50.2%,.164);left:0;bottom:0;right:0;padding:12px;background:#fff;display:-ms-flexbox;display:flex}\@media (max-width:440px){:host .messageForm{bottom:10px}}:host .messageForm .messageInput{height:35px;border:none;font-size:15px;-ms-flex:1;flex:1;margin-right:12px}:host .messageForm .messageInput:focus{outline:none}:host .messageForm .submitBtn{position:relative;display:inline-block;height:35px;padding:0 12px;-webkit-box-sizing:border-box;box-sizing:border-box;margin:0;font-weight:600;font-size:14px;font-family:Proxima Nova,Helvetica Neue,Helvetica,Arial,sans-serif;line-height:30px;color:#263238;vertical-align:middle;cursor:pointer;border:1px solid transparent;border-radius:3px;text-decoration:none;white-space:nowrap;font-weight:700;color:#fff;background-color:#1f9efc;background-image:-webkit-gradient(linear,left top,left bottom,from(#4ab2fd),to(#1e9efc));background-image:linear-gradient(-180deg,#4ab2fd,#1e9efc);border-color:#0075bb}:host .messageForm .submitBtn:hover{background-image:-webkit-gradient(linear,left top,left bottom,color-stop(2%,#2d9def),to(#007dd9));background-image:linear-gradient(-180deg,#2d9def 2%,#007dd9)}:host .messageForm .submitBtn:active{background-image:none;background-color:#0769b0;border-color:#0769b0;-webkit-box-shadow:inset 0 1px 3px 0 #004670;box-shadow:inset 0 1px 3px 0 #004670}:host .messageForm .submitBtn:focus{outline:none}"}}class m{constructor(t){e(this,t)}render(){return n("div",{class:"messageList"},n("ul",{class:"messageDialog"},this.messageSentDate.length>0&&n("iac-history-message-list",{historyMessages:this.historyMessages,historyLoaded:this.historyMessages,uuid:this.uuid,users:this.users}),n("iac-sender-message-list",{sendersInfo:this.sendersInfo,uuid:this.uuid,users:this.users})))}static get style(){return":host{grid-row:2;grid-column:2;width:100%;height:100%;border-right:1px solid hsla(0,0%,50.2%,.164);border-bottom:1px solid hsla(0,0%,50.2%,.164)}\@media (max-width:770px){:host{grid-column:1/3}}:host .messageList{height:calc(800px - 104px)}:host .networkErrorImg{width:80%;height:100%;position:relative;left:100px}:host .messageDialog{height:inherit;margin-top:0;overflow-y:auto;overflow-x:hidden;position:relative;list-style:none}:host .messageDialog .text{max-width:270px;padding:15px;display:inline-block;border-radius:10px}:host .messageDialog .name,:host .messageDialog .time{font-size:15px;color:grey;font-weight:700;position:absolute}:host .messageDialog li{width:300px;position:relative;margin-top:40px;margin-left:8px}:host .messageDialog li .messageSentDay{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;position:relative;width:100%;top:-20px;margin-top:0;margin-bottom:30px;color:grey;font-size:13px;text-align:center}:host .messageDialog li .messageSentDay:empty{display:none}:host .messageDialog li img{position:absolute;bottom:0;left:-30px}:host .messageDialog li .message{position:relative;word-break:break-word;word-wrap:break-word}:host .messageDialog li .name,:host .messageDialog li .time{left:5px}:host .messageDialog li .name{top:-18px}:host .messageDialog li .time{bottom:-18px}:host .messageDialog .historyMessageDialog,:host .messageDialog .senderMessageDialog{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;width:100%}:host .messageDialog .historyMessageDialog .senderMessage,:host .messageDialog .senderMessageDialog .senderMessage{-ms-flex-item-align:end;align-self:flex-end;margin-right:50px;color:#fff;text-align:right}:host .messageDialog .historyMessageDialog .senderMessage img,:host .messageDialog .senderMessageDialog .senderMessage img{left:305px}:host .messageDialog .historyMessageDialog .senderMessage .text,:host .messageDialog .senderMessageDialog .senderMessage .text{background-color:#1f9efc;text-align:left}:host .messageDialog .historyMessageDialog .senderMessage .name,:host .messageDialog .historyMessageDialog .senderMessage .time,:host .messageDialog .senderMessageDialog .senderMessage .name,:host .messageDialog .senderMessageDialog .senderMessage .time{left:unset;right:5px}"}}class k{constructor(t){e(this,t)}putLoggedInUserFirst(e){if(e.length){const t=e.map(e=>e.uuid).indexOf(this.loggedInUser);-1!==t&&([e[0],e[t]]=[e[t],e[0]])}}componentWillLoad(){}render(){return n("div",{class:"onlineUsers"},this.putLoggedInUserFirst(this.onlineUsers),n("ul",{class:"onlineUserList"},this.onlineUsers.map(e=>n("iac-user",{user:JSON.stringify(e),loggedInUser:this.loggedInUser}))))}static get style(){return":host{grid-row:2/4;grid-column:1;position:relative;overflow-y:auto;overflow-x:hidden;height:100%;border:1px solid hsla(0,0%,50.2%,.164);border-top:unset}\@media (max-width:770px){:host{display:none}}:host .onlineUserList{list-style:none;position:relative;left:-30px}:host .onlineUserList li{margin-bottom:40px;position:relative}:host .onlineUserList li img{position:absolute;left:0}:host .onlineUserList li .userName{position:relative;display:inline;top:0;left:60px;font-size:.9em;font-weight:700}:host .onlineUserList li .userName .youSign{position:absolute;top:0;right:-40px;font-weight:700}:host .onlineUserList li .designation{position:absolute;top:20px;left:60px;font-size:.9em;color:grey}"}}class w{constructor(t){e(this,t)}componentWillLoad(){}render(){return n("div",{class:"senderMessageDialog"},this.sendersInfo.map((e,t)=>n("li",{class:l(e.senderId,this.uuid),key:t},n("div",{class:"messageSentDay"},p(e.timetoken,"senderMessage")),n("div",{class:"message"},n("img",{width:"28",height:"28",alt:"Sender avatar",src:u(this.users,e.senderId)}),n("div",{class:"name"},c(this.users,e.senderId)),n("div",{class:"time"},f(e.timetoken),n("div",{class:"date"}," on ",p(e.timetoken,"historyMessage"))),n("div",{class:"text"},e.text)))))}static get style(){return":host .senderMessageDialog{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host .senderMessageDialog li{position:relative;margin-top:40px;margin-left:8px;width:100%;margin-bottom:18px;-ms-flex-item-align:start;align-self:flex-start;margin-right:50px;color:grey;text-align:left}:host .senderMessageDialog li img{border-radius:50%;vertical-align:middle;margin-right:12px}:host .senderMessageDialog .senderMessage{-ms-flex-item-align:end;align-self:flex-end;margin-right:50px;color:grey;text-align:right}:host .senderMessageDialog .senderMessage .messageSentDay{display:none}:host .senderMessageDialog .senderMessage img{left:305px}:host .senderMessageDialog .senderMessage .message{position:relative;word-break:break-word;word-wrap:break-word}:host .senderMessageDialog .name{top:-18px}:host .senderMessageDialog .time{bottom:-18px}.time .date{opacity:.5;display:inline}.messageSentDay{display:none}.text{max-width:270px;padding:15px;display:inline-block;border-radius:10px;background-color:#1f9efc;color:#fff}.name,.time{font-size:12px;color:grey;font-weight:700;position:absolute;text-align:left}.senderMessage .text{max-width:270px;padding:15px;display:inline-block;border-radius:10px;background-color:#999;color:#fff}.senderMessage .name,.senderMessage .time{left:unset;right:5px;font-size:11px;color:grey;font-weight:700;position:absolute}"}}class O{constructor(t){e(this,t)}componentWillLoad(){this.parsedUser=JSON.parse(this.user)}render(){return n("li",null,n("img",{width:"45",height:"45",alt:"Online users",src:this.parsedUser.image}),n("div",{class:"userName"},this.parsedUser.name," ",this.parsedUser.uuid===this.loggedInUser&&n("div",{class:"youSign"},"(You)")))}static get style(){return"img{border-radius:50%;height:45px;width:45px}li{display:-ms-flexbox;display:flex;margin-bottom:12px}.userName{margin-left:12px;font-size:.9em;font-weight:700;line-height:45px}.userName .youSign{position:absolute;top:0;right:-40px;font-weight:700}.designation{position:absolute;top:20px;left:60px;font-size:.9em;color:grey}"}}export{y as iac_chat,b as iac_header,v as iac_history_message_list,_ as iac_message_body,m as iac_message_list,k as iac_online_users,w as iac_sender_message_list,O as iac_user};